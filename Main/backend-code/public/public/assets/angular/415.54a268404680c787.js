"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[415],{1415:(Dn,j,s)=>{s.r(j),s.d(j,{DocumentLibraryModule:()=>An});var u=s(6895),D=s(8988),v=s(6308),ne=s(4913),G=s(6451),Q=s(4968),A=s(8505),x=s(8372),Z=s(1884),C=s(2676),re=s(1312),T=s(1135),H=s(9646),M=s(262),$=s(8746);class oe{get data(){return this._data}set data(r){this._data=r}constructor(r){this.documentService=r,this.documentsSubject=new T.X([]),this.responseHeaderSubject=new T.X(null),this.loadingSubject=new T.X(!1),this.loading$=this.loadingSubject.asObservable(),this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}connect(r){return this.documentsSubject.asObservable()}disconnect(r){this.documentsSubject.complete(),this.loadingSubject.complete()}loadDocuments(r){this.loadingSubject.next(!0),this.documentService.getDocuments(r).pipe((0,M.K)(()=>(0,H.of)([])),(0,$.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{const n=new re.E;n.pageSize=parseInt(t.headers.get("pageSize")),n.totalCount=parseInt(t.headers.get("totalCount")),n.skip=parseInt(t.headers.get("skip")),this.responseHeaderSubject.next(n),this._data=[...t.body],this.documentsSubject.next(this._data)})}}var ae=s(5017),se=s(6927),m=s(4006),_=s(5412),p=s(2851),f=s(4598),g=s(1357),e=s(4650),me=s(3037),y=s(690),O=s(7185),V=s(3023),w=s(6107),R=s(4859),b=s(7392),E=s(1572),L=s(6709),F=s(1948),h=s(5415),N=s(9383);function ce(i,r){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SUBJECT_IS_REQUIRED")," "))}function de(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ce,3,3,"div",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("subject").errors?null:t.reminderForm.get("subject").errors.required)}}function le(i,r){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE_IS_REQUIRED")," "))}function ue(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,le,3,3,"div",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("message").errors?null:t.reminderForm.get("message").errors.required)}}function pe(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function _e(i,r){1&i&&(e.TgZ(0,"div")(1,"div",31),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"FREQUENCY_IS_REQUIRED")," "))}function he(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",32)(2,"label",33),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",34),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFrequencyChange())}),e.TgZ(6,"option",35),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,pe,2,2,"option",36),e.qZA(),e.YNc(10,_e,4,3,"div",11),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,4,"FREQUENCY"),""),e.xp6(4),e.hij("--",e.lcZ(8,6,"NONE"),"--"),e.xp6(2),e.Q6J("ngForOf",t.reminderFrequencies),e.xp6(1),e.Q6J("ngIf",t.reminderForm.get("frequency").hasError("required"))}}function ge(i,r){if(1&i&&(e.TgZ(0,"div",44),e.ynx(1,45),e.TgZ(2,"mat-checkbox",46),e._uU(3),e.qZA(),e.BQk(),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.hij(" ",t.get("name").value," ")}}function fe(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",41),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",42),e.YNc(5,ge,4,2,"div",43),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(3),e.Q6J("ngForOf",t.dailyRemindersArray.controls)}}function ve(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",51),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ae(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",48)(5,"mat-radio-group",49),e.YNc(6,ve,2,2,"mat-radio-button",50),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(4),e.Q6J("ngForOf",t.dayOfWeek)}}function Te(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function De(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function xe(i,r){1&i&&(e.TgZ(0,"div")(1,"div",31),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function Ze(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,45),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",57),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(6,Te,2,2,"option",36),e.qZA()(),e.TgZ(7,"td")(8,"select",58),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(9,De,2,2,"option",36),e.qZA(),e.YNc(10,xe,4,3,"div",11),e.qZA(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.get("name").value),e.xp6(3),e.Q6J("ngForOf",t.get("monthValues").value),e.xp6(3),e.Q6J("ngForOf",o.days),e.xp6(1),e.Q6J("ngIf",t.get("day").touched&&t.hasError("invalidDate"))}}function Ce(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",53)(5,"table",54)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",55),e.YNc(16,Ze,11,5,"tr",56),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_QUARTER_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"SELECT_REMINDER_MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"SELECT_REMINDER_DAY")),e.xp6(3),e.Q6J("ngForOf",t.quarterlyRemindersArray.controls)}}function ye(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Re(i,r){if(1&i&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function be(i,r){1&i&&(e.TgZ(0,"div")(1,"div",31),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function Ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,45),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",57),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(6,ye,2,2,"option",36),e.qZA()(),e.TgZ(7,"td")(8,"select",58),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(9,Re,2,2,"option",36),e.qZA(),e.YNc(10,be,4,3,"div",11),e.qZA(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.get("name").value),e.xp6(3),e.Q6J("ngForOf",t.get("monthValues").value),e.xp6(3),e.Q6J("ngForOf",o.days),e.xp6(1),e.Q6J("ngIf",t.get("day").touched&&t.hasError("invalidDate"))}}function Le(i,r){if(1&i&&(e.TgZ(0,"div",40)(1,"label",59),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",60)(5,"table",54)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",61),e.YNc(16,Ee,11,5,"tr",56),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"SELECT_REMINDER_MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"SELECT_REMINDER_DAY")),e.xp6(3),e.Q6J("ngForOf",t.halfYearlyRemindersArray.controls)}}function Fe(i,r){if(1&i&&(e.TgZ(0,"div",5)(1,"div",38),e.YNc(2,fe,6,4,"div",39),e.YNc(3,Ae,7,4,"div",39),e.YNc(4,Ce,17,10,"div",39),e.YNc(5,Le,17,10,"div",39),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","0"===t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","1"===t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","3"===t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","4"===t.reminderForm.get("frequency").value)}}function Ne(i,r){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DATE_IS_REQUIRED")," "))}function Se(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ne,3,3,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.required)}}function qe(i,r){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Ue(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,qe,3,3,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.owlDateTimeMin)}}function Oe(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",62),e.YNc(5,Se,2,1,"div",11),e.YNc(6,Ue,2,1,"div",11),e._UZ(7,"owl-date-time",null,63),e.qZA()),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"REMINDER_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors)}}function we(i,r){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_IS_REQUIRED")," "))}function Ie(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,we,3,3,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.required)}}function Ye(i,r){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Qe(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ye,3,3,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.owlDateTimeMin)}}function Me(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",64),e.YNc(5,Ie,2,1,"div",11),e.YNc(6,Qe,2,1,"div",11),e._UZ(7,"owl-date-time",null,65),e.qZA()),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"REMINDER_START_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors)}}function Je(i,r){if(1&i&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",66),e.ALo(5,"translate"),e._UZ(6,"owl-date-time",null,67),e.qZA()),2&i){const t=e.MAs(7);e.xp6(2),e.Oqu(e.lcZ(3,4,"REMINDER_END_DATE")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"REMINDER_END_DATE")),e.Q6J("owlDateTimeTrigger",t)("owlDateTime",t)}}function ke(i,r){1&i&&(e.O4$(),e.kcU(),e.TgZ(0,"div",68),e._UZ(1,"mat-spinner"),e.qZA())}let je=(()=>{class i extends C.H{get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}constructor(t,n,o,a,c,d,q,U){super(),this.fb=t,this.reminderService=n,this.commonService=o,this.toastrService=a,this.data=c,this.dialogRef=d,this.securityService=q,this.translationService=U,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.selectedUsers=[],this.isLoading=!1,this.dayOfWeek=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}],this.months=[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],this.days=[]}ngOnInit(){for(let t=1;t<=31;t++)this.days.push(t);this.getReminderFrequency(),this.createReminderForm(),this.getAuthObj()}getAuthObj(){this.sub$.sink=this.securityService.SecurityObject.subscribe(t=>{this.securityObject=t})}closeDialog(){this.dialogRef.close()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}createReminderForm(){this.reminderForm=this.fb.group({id:[""],subject:["",[m.kI.required]],message:["",[m.kI.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[new Date,[m.kI.required]],endDate:[null],dayOfWeek:[2],documentId:[this.data.id]})}checkData(t){t.checked?this.reminderForm.get("frequency").setValidators([m.kI.required]):(this.reminderForm.get("frequency").setValidators([]),this.reminderForm.get("frequency").updateValueAndValidity()),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid)return void this.reminderForm.markAllAsTouched();const t=this.reminderForm.value;t.reminderUsers=[{reminderId:t.id,userId:this.securityObject.user.id}],t.isRepeated||(t.dailyReminders=[],t.quarterlyReminders=[],t.halfYearlyReminders=[]),this.reminder?(t.dailyReminders&&(t.dailyReminders=t.dailyReminders.map(n=>(n.reminderId=this.reminder.id,n))),t.quarterlyReminders&&(t.quarterlyReminders=t.quarterlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),t.halfYearlyReminders&&(t.halfYearlyReminders=t.halfYearlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),this.isLoading=!0,this.sub$.sink=this.reminderService.updateReminder(t).subscribe(n=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1)):(this.isLoading=!0,this.sub$.sink=this.reminderService.addDocumentReminder(t).subscribe(n=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1))}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(t=>{if(this.users=t,this.reminder){const n=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.users.filter(o=>n.indexOf(o.id)>=0)}})}onFrequencyChange(){let t=this.reminderForm.get("frequency").value;t=0==t?"0":t,t==f.D.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==f.D.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(2)):t==f.D.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==f.D.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){const t=this.fb.array([]);t.push(this.createDailyReminderFormGroup(p.e.Sunday)),t.push(this.createDailyReminderFormGroup(p.e.Monday)),t.push(this.createDailyReminderFormGroup(p.e.Tuesday)),t.push(this.createDailyReminderFormGroup(p.e.Wednesday)),t.push(this.createDailyReminderFormGroup(p.e.Thursday)),t.push(this.createDailyReminderFormGroup(p.e.Friday)),t.push(this.createDailyReminderFormGroup(p.e.Saturday)),this.reminderForm.addControl("dailyReminders",t)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){const t=this.fb.array([]),n=this.months.filter(d=>[1,2,3].indexOf(d.id)>=0),o=this.months.filter(d=>[4,5,6].indexOf(d.id)>=0),a=this.months.filter(d=>[7,8,9].indexOf(d.id)>=0),c=this.months.filter(d=>[10,11,12].indexOf(d.id)>=0);t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter1,"Jan - Mar",n)),t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter2,"Apr - Jun",o)),t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter3,"Jul - Sept",a)),t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter4,"Oct - Dec",c)),this.reminderForm.addControl("quarterlyReminders",t)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){const t=this.fb.array([]),n=this.months.filter(a=>[1,2,3,4,5,6].indexOf(a.id)>=0),o=this.months.filter(a=>[7,8,9,10,11,13].indexOf(a.id)>=0);t.push(this.createHalfYearlyReminderFormGroup(g.y.Quarter1,"Jan - Jun",n)),t.push(this.createHalfYearlyReminderFormGroup(g.y.Quarter2,"Jul - Dec",o)),this.reminderForm.addControl("halfYearlyReminders",t)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(t){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[t],isActive:[!0],name:[p.e[t]]})}createQuarterlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}createHalfYearlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}getCurrentDay(){return(new Date).getDate()}onDateChange(t){const n=t.get("day").value,o=t.get("month").value;n>new Date((new Date).getFullYear(),Number.parseInt(o),0).getDate()&&(t.setErrors({invalidDate:"Invalid Date"}),t.markAllAsTouched())}onCancel(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.QS),e.Y36(me.Z),e.Y36(y.v),e.Y36(O._W),e.Y36(_.WI),e.Y36(_.so),e.Y36(V.I),e.Y36(w.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:54,vars:31,consts:[[1,"d-flex"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content",""],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],[4,"ngIf"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-4"],["color","primary","formControlName","isRepeated",3,"change"],[1,"col-md-2"],["color","primary","formControlName","isEmailNotification"],["class","row",4,"ngIf"],["class","form-group col-md-6",4,"ngIf"],[1,"m-t-10","col-md-12"],["type","submit",1,"btn","btn-green","btn-success","btn-sm","m-r-10",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","check-circle","stroke","white"],["id","Icon","d","M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999M22 3.99999L12 14.01L9.00001 11.01","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","button",1,"btn","btn-red","btn-danger","btn-sm",3,"click"],["width","16","height","16","viewBox","0 0 25 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","trash-2","stroke","red"],["id","Icon","d","M3.6875 6H5.6875M5.6875 6H21.6875M5.6875 6V20C5.6875 20.5304 5.89821 21.0391 6.27329 21.4142C6.64836 21.7893 7.15707 22 7.6875 22H17.6875C18.2179 22 18.7266 21.7893 19.1017 21.4142C19.4768 21.0391 19.6875 20.5304 19.6875 20V6H5.6875ZM8.6875 6V4C8.6875 3.46957 8.89821 2.96086 9.27329 2.58579C9.64836 2.21071 10.1571 2 10.6875 2H14.6875C15.2179 2 15.7266 2.21071 16.1017 2.58579C16.4768 2.96086 16.6875 3.46957 16.6875 4V6M10.6875 11V17M14.6875 11V17","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","loading-shade",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate","placeholder","Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt2",""],["formControlName","startDate","placeholder","Start Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt3",""],["formControlName","endDate",1,"form-control",3,"owlDateTimeTrigger","owlDateTime","placeholder"],["dt4",""],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(5,"mat-icon",3),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"form",7)(11,"div",5)(12,"div",8)(13,"label",9),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,de,2,1,"div",11),e.qZA()(),e.TgZ(18,"div",5)(19,"div",8)(20,"label",12),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"textarea",13),e.YNc(24,ue,2,1,"div",11),e.qZA()(),e.TgZ(25,"div",5)(26,"div",14)(27,"mat-checkbox",15),e.NdJ("change",function(a){return n.checkData(a)}),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",16)(31,"mat-checkbox",17),e._uU(32),e.ALo(33,"translate"),e.qZA()()(),e.YNc(34,he,11,8,"div",18),e.YNc(35,Fe,6,4,"div",18),e.TgZ(36,"div",5),e.YNc(37,Oe,9,8,"div",19),e.YNc(38,Me,9,8,"div",19),e.YNc(39,Je,8,8,"div",19),e.TgZ(40,"div",20)(41,"button",21),e.NdJ("click",function(){return n.createReminder()}),e.O4$(),e.TgZ(42,"svg",22)(43,"g",23),e._UZ(44,"path",24),e.qZA()(),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.kcU(),e.TgZ(47,"button",25),e.NdJ("click",function(){return n.onCancel()}),e.O4$(),e.TgZ(48,"svg",26)(49,"g",27),e._UZ(50,"path",28),e.qZA()(),e._uU(51),e.ALo(52,"translate"),e.qZA()()()()()(),e.YNc(53,ke,2,0,"div",29),e.qZA()),2&t&&(e.xp6(2),e.AsE("",e.lcZ(3,17,"ADD_REMINDER")," :: ",null==n.data?null:n.data.name,""),e.xp6(8),e.Q6J("formGroup",n.reminderForm),e.xp6(4),e.hij(" ",e.lcZ(15,19,"SUBJECT"),""),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("subject").touched&&n.reminderForm.get("subject").errors),e.xp6(4),e.hij(" ",e.lcZ(22,21,"MESSAGE"),""),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("message").touched&&n.reminderForm.get("message").errors),e.xp6(4),e.hij(" ",e.lcZ(29,23,"REPEATE_REMINDER")," "),e.xp6(4),e.Oqu(e.lcZ(33,25,"SEND_EMAIL")),e.xp6(2),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(2),e.Q6J("ngIf",!n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(6),e.hij(" ",e.lcZ(46,27,"SAVE")," "),e.xp6(6),e.hij(" ",e.lcZ(52,29,"CANCEL")," "),e.xp6(2),e.Q6J("ngIf",n.isLoading))},dependencies:[u.sg,u.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,R.RK,b.Hw,E.Ou,_.uh,_.xY,L.oG,F.VQ,F.U0,h.sZ,h.BO,h.hV,N.X$],styles:[".btn-green[_ngcontent-%COMP%]{\n    background: #32977F !important;\n  }\n  .btn-green[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: #ffff !important;\n    width: 20px !important;\n    height: 20px !important;\n  }\n  .btn-green-color[_ngcontent-%COMP%]{\n    color: #ffff !important;\n  }\n  .btn-red[_ngcontent-%COMP%]{\n    border: 1px solid red !important;\n    background-color: white !important;\n    color: red !important;\n  }\n  \n  .btn-red[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: red !important;\n    width: 20px !important;\n    height: 20px !important;\n  }"]}),i})();var P=s(7954),Ge=s(2340),He=s(8464),B=s(6943),W=s(914),$e=s(9549),K=s(9785),I=s(4385),z=s(3238);function Ve(i,r){1&i&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DOCUMENT_IS_REQUIRED")," "))}function Pe(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ve,3,3,"div",17),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.documentForm.get("url").errors?null:t.documentForm.get("url").errors.required)}}function Be(i,r){1&i&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOW")," "))}function We(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Be,3,3,"div",17),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.documentForm.get("extension").errors?null:t.documentForm.get("extension").errors.required)}}function Ke(i,r){1&i&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NAME_IS_REQUIRED")," "))}function ze(i,r){1&i&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NAME_IS_REQUIRED")," "))}function Xe(i,r){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name,"")}}function et(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const tt=function(i){return{"margin-left.px":i}};function it(i,r){if(1&i&&(e.TgZ(0,"mat-option",35)(1,"div",36),e.YNc(2,Xe,3,1,"div",15),e.YNc(3,et,2,1,"div",15),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngStyle",e.VKq(4,tt,20*t.deafLevel)),e.xp6(1),e.Q6J("ngIf",!t.parentId),e.xp6(1),e.Q6J("ngIf",t.parentId)}}function nt(i,r){1&i&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CATEGORY_IS_REQUIRED")," "))}function rt(i,r){if(1&i&&(e.TgZ(0,"mat-option",35)(1,"div",37)(2,"b"),e._uU(3),e.qZA()()()),2&i){const t=r.$implicit;e.Q6J("value",t.name),e.xp6(3),e.hij(" ",t.name,"")}}function ot(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.selectedRoles[0].name," ")}}function at(i,r){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" (+",t.selectedRoles.length-1," ",2===t.selectedRoles.length?"other":"others",") ")}}function st(i,r){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function mt(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_IS_REQURED")," "))}function ct(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"END_DATE_IS_REQURED")," "))}function dt(i,r){if(1&i&&(e.TgZ(0,"div",4)(1,"div",22),e._UZ(2,"input",47),e.ALo(3,"translate"),e._UZ(4,"owl-date-time",null,48),e.YNc(6,mt,3,3,"mat-error",15),e.qZA(),e.TgZ(7,"div",22),e._UZ(8,"input",49),e.ALo(9,"translate"),e._UZ(10,"owl-date-time",null,50),e.YNc(12,ct,3,3,"mat-error",15),e.qZA()()),2&i){const t=e.MAs(5),n=e.MAs(11),o=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,10,"CHOOSE_A_START_DATE")),e.Q6J("min",o.minDate)("owlDateTimeTrigger",t)("owlDateTime",t),e.xp6(4),e.Q6J("ngIf",o.rolePermissionFormGroup.get("startDate").touched&&o.rolePermissionFormGroup.get("startDate").hasError("required")),e.xp6(2),e.s9C("placeholder",e.lcZ(9,12,"CHOOSE_A_END_DATE")),e.Q6J("min",o.rolePermissionFormGroup.get("startDate").value)("owlDateTimeTrigger",n)("owlDateTime",n),e.xp6(4),e.Q6J("ngIf",o.rolePermissionFormGroup.get("startDate").touched&&o.rolePermissionFormGroup.get("endDate").hasError("required"))}}function lt(i,r){if(1&i){const t=e.EpF();e.ynx(0,43),e.TgZ(1,"div",4)(2,"mat-checkbox",44),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.roleTimeBoundChange(o))}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,dt,13,14,"div",45),e.TgZ(6,"div",4)(7,"mat-checkbox",46),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"SPACIFY_THE_PERIOD"),""),e.xp6(2),e.Q6J("ngIf",t.rolePermissionFormGroup.get("isTimeBound").value),e.xp6(3),e.Oqu(e.lcZ(9,5,"ALLOW_DOWNLOAD"))}}function ut(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"h6",38),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",39),e.NdJ("valueChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedRoles=o)}),e.ALo(5,"translate"),e.TgZ(6,"mat-select-trigger"),e.YNc(7,ot,2,1,"span",15),e.YNc(8,at,2,2,"span",40),e.qZA(),e.YNc(9,st,2,2,"mat-option",20),e.qZA(),e.YNc(10,lt,10,7,"ng-container",41),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"ASSIGN_SHARE_WITH_ROLES")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,9,"ROLES")),e.Q6J("value",t.selectedRoles),e.xp6(3),e.Q6J("ngIf",t.selectedRoles.length>0),e.xp6(1),e.Q6J("ngIf",t.selectedRoles.length>1),e.xp6(1),e.Q6J("ngForOf",t.roles),e.xp6(1),e.Q6J("ngIf",t.selectedRoles.length>0)}}function pt(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.selectedUsers[0].firstName," ",t.selectedUsers[0].lastName," ")}}function _t(i,r){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" (+",t.selectedUsers.length-1," ",2===t.selectedRoles.length?"other":"others",") ")}}function ht(i,r){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.AsE(" ",t.firstName," ",t.lastName," ")}}function gt(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_IS_REQURED")," "))}function ft(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"END_DATE_IS_REQURED")," "))}function vt(i,r){if(1&i&&(e.TgZ(0,"div",4)(1,"div",22),e._UZ(2,"input",47),e.ALo(3,"translate"),e._UZ(4,"owl-date-time",null,48),e.YNc(6,gt,3,3,"mat-error",15),e.qZA(),e.TgZ(7,"div",22),e._UZ(8,"input",49),e.ALo(9,"translate"),e._UZ(10,"owl-date-time",null,50),e.YNc(12,ft,3,3,"mat-error",15),e.qZA()()),2&i){const t=e.MAs(5),n=e.MAs(11),o=e.oxw(3);e.xp6(2),e.s9C("placeholder",e.lcZ(3,10,"CHOOSE_A_START_DATE")),e.Q6J("min",o.minDate)("owlDateTimeTrigger",t)("owlDateTime",t),e.xp6(4),e.Q6J("ngIf",o.userPermissionFormGroup.get("startDate").touched&&o.userPermissionFormGroup.get("startDate").hasError("required")),e.xp6(2),e.s9C("placeholder",e.lcZ(9,12,"CHOOSE_A_END_DATE")),e.Q6J("min",o.userPermissionFormGroup.get("startDate").value)("owlDateTimeTrigger",n)("owlDateTime",n),e.xp6(4),e.Q6J("ngIf",o.userPermissionFormGroup.get("startDate").touched&&o.userPermissionFormGroup.get("endDate").hasError("required"))}}function At(i,r){if(1&i){const t=e.EpF();e.ynx(0,52),e.TgZ(1,"div",4)(2,"mat-checkbox",44),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.userTimeBoundChange(o))}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,vt,13,14,"div",45),e.TgZ(6,"div",4)(7,"mat-checkbox",46),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"SPACIFY_THE_PERIOD"),""),e.xp6(2),e.Q6J("ngIf",t.userPermissionFormGroup.get("isTimeBound").value),e.xp6(3),e.Oqu(e.lcZ(9,5,"ALLOW_DOWNLOAD"))}}function Tt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"h6",38),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-select",39),e.NdJ("valueChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedUsers=o)}),e.ALo(5,"translate"),e.TgZ(6,"mat-select-trigger"),e.YNc(7,pt,2,2,"span",15),e.YNc(8,_t,2,2,"span",40),e.qZA(),e.YNc(9,ht,2,3,"mat-option",20),e.qZA(),e.YNc(10,At,10,7,"ng-container",51),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"ASSIGN_SHARE_WITH_USERS")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,9,"USERS")),e.Q6J("value",t.selectedUsers),e.xp6(3),e.Q6J("ngIf",t.selectedUsers.length>0),e.xp6(1),e.Q6J("ngIf",t.selectedUsers.length>1),e.xp6(1),e.Q6J("ngForOf",t.users),e.xp6(1),e.Q6J("ngIf",t.selectedUsers.length>0)}}const Dt=function(){return["/"]};let X=(()=>{class i extends C.H{get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}constructor(t,n,o,a,c,d,q,U,J,k){super(),this.fb=t,this.cd=n,this.districtService=o,this.categoryService=a,this.commonService=c,this.documentService=d,this.router=q,this.translationService=U,this.toastrService=J,this.securityService=k,this.extension="",this.districts=[],this.categories=[],this.allCategories=[],this.progress=0,this.message="",this.isFileUpload=!1,this.selectedRoles=[],this.selectedUsers=[],this.minDate=new Date}ngOnInit(){this.createDocumentForm(),this.getCategories(),this.documentMetaTagsArray.push(this.buildDocumentMetaTag()),this.getUsers(),this.getRoles(),this.getDistricts()}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(t=>this.users=t)}getRoles(){this.sub$.sink=this.commonService.getRolesForDropdown().subscribe(t=>this.roles=t)}getDistricts(){this.districtService.getAllDistricts().subscribe(t=>{console.log(t),this.districts=t})}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(t=>{this.categories=t,this.setDeafLevel()})}setDeafLevel(t,n){const o=this.categories.filter(a=>a.parentId==n);return o.length>0&&o.map((a,c)=>{a.deafLevel=t?t.deafLevel+1:0,a.index=(t?t.index:0)+c*Math.pow(.1,a.deafLevel),this.allCategories.push(a),this.setDeafLevel(a,a.id)}),t}onDocumentChange(t){const o=(t.target.files||t.srcElement.files)[0];if(this.extension=o.name.split(".").pop(),this.fileExtesionValidation(this.extension)){const a=new FileReader;a.onload=c=>{this.documentSource=c.target.result,this.fileUploadValidation("upload")},a.readAsDataURL(o)}else this.documentSource=null,this.fileUploadValidation("")}fileUploadValidation(t){this.documentForm.patchValue({url:t}),this.documentForm.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(t){this.documentForm.patchValue({extension:t}),this.documentForm.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(t){return!!Ge.N.allowExtesions.find(a=>a.extentions.find(c=>c===t))}createDocumentForm(){this.documentForm=this.fb.group({name:["",[m.kI.required]],farmerid:["",[m.kI.required]],description:[""],district:["",[m.kI.required]],categoryId:["",[m.kI.required]],url:[""],extension:["",[m.kI.required]],documentMetaTags:this.fb.array([]),selectedRoles:[],selectedUsers:[],rolePermissionForm:this.fb.group({isTimeBound:new m.p4(!1),startDate:[""],endDate:[""],isAllowDownload:new m.p4(!1)}),userPermissionForm:this.fb.group({isTimeBound:new m.p4(!1),startDate:[""],endDate:[""],isAllowDownload:new m.p4(!1)})})}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],metatag:[""]})}get rolePermissionFormGroup(){return this.documentForm.get("rolePermissionForm")}get userPermissionFormGroup(){return this.documentForm.get("userPermissionForm")}onMetatagChange(t,n){if(!this.documentMetaTagsArray.at(n).get("metatag").value)return;const a=this.documentMetaTagsArray.at(n).get("metatag");a.setValidators([m.kI.required]),a.updateValueAndValidity()}editDocmentMetaData(t){return this.fb.group({id:[t.id],documentId:[t.documentId],metatag:[t.metatag]})}SaveDocument(){if(this.documentForm.valid){const t=this.buildDocumentObject();this.documentService.addDocument(t).subscribe(n=>{this.addDocumentTrail(n),this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY"))})}else this.documentForm.markAllAsTouched()}addDocumentTrail(t){const n={documentId:t,operationName:P.g.Created.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(n).subscribe(()=>{this.router.navigate(["/"])})}buildDocumentObject(){const t=this.documentMetaTagsArray.getRawValue(),n={categoryId:this.documentForm.get("categoryId").value,description:this.documentForm.get("description").value,name:this.documentForm.get("name").value,farmerid:this.documentForm.get("farmerid").value,district:this.documentForm.get("district").value,url:this.fileData.fileName,documentMetaDatas:[...t],fileData:this.fileData,extension:this.extension};return this.selectedRoles.length>0&&(n.documentRolePermissions=this.selectedRoles.map(o=>Object.assign({},{id:"",documentId:"",roleId:o.id},this.rolePermissionFormGroup.value))),this.selectedUsers.length>0&&(n.documentUserPermissions=this.selectedUsers.map(o=>Object.assign({},{id:"",documentId:"",userId:o.id},this.userPermissionFormGroup.value))),n}onAddAnotherMetaTag(){this.documentMetaTagsArray.insert(0,this.editDocmentMetaData({id:"",documentId:this.document&&this.document.id?this.document.id:"",metatag:""}))}onDeleteMetaTag(t){this.documentMetaTagsArray.removeAt(t)}upload(t){if(0!==t.length){if(this.extension=t[0].name.split(".").pop(),!this.fileExtesionValidation(this.extension))return this.fileUploadExtensionValidation(""),void this.cd.markForCheck();this.fileUploadExtensionValidation("valid"),this.fileData=t[0],this.documentForm.get("url").setValue(t[0].name),this.documentForm.get("name").setValue(t[0].name)}}roleTimeBoundChange(t){t.checked?(this.rolePermissionFormGroup.get("startDate").setValidators([m.kI.required]),this.rolePermissionFormGroup.get("endDate").setValidators([m.kI.required])):(this.rolePermissionFormGroup.get("startDate").clearValidators(),this.rolePermissionFormGroup.get("startDate").updateValueAndValidity(),this.rolePermissionFormGroup.get("endDate").clearValidators(),this.rolePermissionFormGroup.get("endDate").updateValueAndValidity())}userTimeBoundChange(t){t.checked?(this.userPermissionFormGroup.get("startDate").setValidators([m.kI.required]),this.userPermissionFormGroup.get("endDate").setValidators([m.kI.required])):(this.userPermissionFormGroup.get("startDate").clearValidators(),this.userPermissionFormGroup.get("startDate").updateValueAndValidity(),this.userPermissionFormGroup.get("endDate").clearValidators(),this.userPermissionFormGroup.get("endDate").updateValueAndValidity())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.QS),e.Y36(e.sBO),e.Y36(He.R),e.Y36(B.H),e.Y36(y.v),e.Y36(W.Z),e.Y36(D.F0),e.Y36(w.D),e.Y36(O._W),e.Y36(V.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-document"]],features:[e.qOj],decls:76,vars:45,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"col-md-4"],[1,"form-label"],["type","file",1,"form-control",3,"change"],["file",""],[4,"ngIf"],["formControlName","name","type","text",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","farmerid","type","text",1,"form-control"],["formControlName","categoryId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formControlName","district",1,"form-select"],[1,"col-md-6"],["formControlName","description",1,"form-control"],["class","col-md-6",4,"hasClaim"],[1,"m-t-10","col-md-12"],["cdkFocusInitial","",1,"btn","btn-green","btn-success","btn-sm","m-r-10",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","check-circle"],["id","Icon","d","M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999M22 3.99999L12 14.01L9.00001 11.01","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","button",1,"btn","btn-red","btn-danger","btn-sm",3,"routerLink"],["width","25","height","24","viewBox","0 0 25 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","trash-2","stroke","red"],["id","Icon","d","M3.6875 6H5.6875M5.6875 6H21.6875M5.6875 6V20C5.6875 20.5304 5.89821 21.0391 6.27329 21.4142C6.64836 21.7893 7.15707 22 7.6875 22H17.6875C18.2179 22 18.7266 21.7893 19.1017 21.4142C19.4768 21.0391 19.6875 20.5304 19.6875 20V6H5.6875ZM8.6875 6V4C8.6875 3.46957 8.89821 2.96086 9.27329 2.58579C9.64836 2.21071 10.1571 2 10.6875 2H14.6875C15.2179 2 15.7266 2.21071 16.1017 2.58579C16.4768 2.96086 16.6875 3.46957 16.6875 4V6M10.6875 11V17M14.6875 11V17","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-danger"],[3,"value"],[1,"country-item",3,"ngStyle"],[1,"country-item"],[1,"vew-mail-header"],["multiple","",1,"form-select",3,"placeholder","value","valueChange"],["class","example-additional-selection",4,"ngIf"],["formGroupName","rolePermissionForm",4,"ngIf"],[1,"example-additional-selection"],["formGroupName","rolePermissionForm"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row",4,"ngIf"],["color","primary","formControlName","isAllowDownload"],["formControlName","startDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"],["date1",""],["formControlName","endDate",1,"form-control",3,"min","placeholder","owlDateTimeTrigger","owlDateTime"],["date2",""],["formGroupName","userPermissionForm",4,"ngIf"],["formGroupName","userPermissionForm"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.ALo(9,"translate"),e.qZA()()()()()(),e.TgZ(10,"div",4)(11,"div",7)(12,"div",8)(13,"div",9)(14,"form",10)(15,"div",4)(16,"div",11)(17,"label",12),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"input",13,14),e.NdJ("change",function(){e.CHM(o);const c=e.MAs(21);return e.KtG(n.upload(c.files))}),e.qZA(),e.YNc(22,Pe,2,1,"div",15),e.YNc(23,We,2,1,"div",15),e.qZA(),e.TgZ(24,"div",11)(25,"label",12),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",16),e.YNc(29,Ke,3,3,"div",17),e.qZA(),e.TgZ(30,"div",11)(31,"label",12),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"input",18),e.YNc(35,ze,3,3,"div",17),e.qZA(),e.TgZ(36,"div",11)(37,"label",12),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"mat-select",19)(41,"mat-option"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.YNc(44,it,4,6,"mat-option",20),e.qZA(),e.YNc(45,nt,3,3,"div",17),e.qZA(),e.TgZ(46,"div",11)(47,"label",12),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"mat-select",21)(51,"mat-option"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,rt,4,2,"mat-option",20),e.qZA()(),e.TgZ(55,"div",22)(56,"label",12),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"textarea",23),e._uU(60,"                  "),e.qZA()(),e.YNc(61,ut,11,11,"div",24),e.YNc(62,Tt,11,11,"div",24),e.TgZ(63,"div",25)(64,"button",26),e.NdJ("click",function(){return n.SaveDocument()}),e.O4$(),e.TgZ(65,"svg",27)(66,"g",28),e._UZ(67,"path",29),e.qZA()(),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.kcU(),e.TgZ(70,"button",30),e.O4$(),e.TgZ(71,"svg",31)(72,"g",32),e._UZ(73,"path",33),e.qZA()(),e._uU(74),e.ALo(75,"translate"),e.qZA()()()()()()()()()()}if(2&t){let o,a,c,d;e.xp6(8),e.Oqu(e.lcZ(9,22,"ADD_DOCUMENT")),e.xp6(6),e.Q6J("formGroup",n.documentForm),e.xp6(4),e.Oqu(e.lcZ(19,24,"DOCUMENT_UPLOAD")),e.xp6(4),e.Q6J("ngIf",n.documentForm.get("url").touched&&(null==(o=n.documentForm.get("url"))?null:o.errors)),e.xp6(1),e.Q6J("ngIf",n.documentForm.get("extension").touched&&!(null!=(a=n.documentForm.get("url"))&&a.errors)&&n.documentForm.get("extension").errors),e.xp6(3),e.Oqu(e.lcZ(27,26,"NAME")),e.xp6(3),e.Q6J("ngIf",n.documentForm.get("name").touched&&(null==(c=n.documentForm.get("name"))?null:c.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(33,28,"META_TAGS")),e.xp6(3),e.Q6J("ngIf",n.documentForm.get("farmerid").touched&&(null==(d=n.documentForm.get("farmerid"))?null:d.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(39,30,"CATEGORY")),e.xp6(4),e.hij("-- ",e.lcZ(43,32,"NONE")," --"),e.xp6(2),e.Q6J("ngForOf",n.allCategories),e.xp6(1),e.Q6J("ngIf",n.documentForm.get("categoryId").touched&&n.documentForm.get("categoryId").hasError("required")),e.xp6(3),e.Oqu(e.lcZ(49,34,"CONTRACT_DISTRICT")),e.xp6(4),e.hij("-- ",e.lcZ(53,36,"NONE")," --"),e.xp6(2),e.Q6J("ngForOf",n.districts),e.xp6(3),e.Oqu(e.lcZ(58,38,"DESCRIPTION")),e.xp6(4),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_SHARE_DOCUMENT"),e.xp6(1),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_SHARE_DOCUMENT"),e.xp6(6),e.hij(" ",e.lcZ(69,40,"SAVE"),""),e.xp6(2),e.Q6J("routerLink",e.DdM(44,Dt)),e.xp6(4),e.hij(" ",e.lcZ(75,42,"CANCEL"),"")}},dependencies:[u.sg,u.O5,u.PC,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.x0,D.rH,$e.TO,K.d,I.gD,I.$L,z.ey,L.oG,h.sZ,h.BO,h.hV,N.X$],styles:[".btn-green[_ngcontent-%COMP%]{\n    background: #32977F !important;\n  }\n  .btn-green[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: #ffff !important;\n    width: 20px !important;\n    height: 20px !important;\n  }\n  .btn-green-color[_ngcontent-%COMP%]{\n    color: #ffff !important;\n  }\n  .btn-red[_ngcontent-%COMP%]{\n    border: 1px solid red !important;\n    background-color: white !important;\n    color: red !important;\n  }\n  \n  .btn-red[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: red !important;\n    width: 20px !important;\n    height: 20px !important;\n  }"]}),i})();var S=s(8739),xt=s(4702),Zt=s(7579);function Ct(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function yt(i,r){1&i&&(e.TgZ(0,"div")(1,"div",27),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"FREQUENCY_IS_REQUIRED")," "))}function Rt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",20)(2,"label",21),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",22),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFrequencyChange())}),e.TgZ(6,"option",23),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,Ct,2,2,"option",24),e.qZA(),e.YNc(10,yt,4,3,"div",25),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,4,"FREQUENCY"),""),e.xp6(4),e.hij("--",e.lcZ(8,6,"NONE"),"--"),e.xp6(2),e.Q6J("ngForOf",t.reminderFrequencies),e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("frequency").errors?null:t.reminderForm.get("frequency").errors.required)}}function bt(i,r){if(1&i&&(e.TgZ(0,"div",34),e.ynx(1,35),e.TgZ(2,"mat-checkbox",36),e._uU(3),e.qZA(),e.BQk(),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.hij(" ",t.get("name").value," ")}}function Et(i,r){if(1&i&&(e.TgZ(0,"div",30)(1,"label",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",32),e.YNc(5,bt,4,2,"div",33),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(3),e.Q6J("ngForOf",t.dailyRemindersArray.controls)}}function Lt(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",41),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ft(i,r){if(1&i&&(e.TgZ(0,"div",30)(1,"label",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",38)(5,"mat-radio-group",39),e.YNc(6,Lt,2,2,"mat-radio-button",40),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(4),e.Q6J("ngForOf",t.dayOfWeek)}}function Nt(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function St(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function qt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,35),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",47),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(6,Nt,2,2,"option",24),e.qZA()(),e.TgZ(7,"td")(8,"select",48),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(9,St,2,2,"option",24),e.qZA()(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.get("name").value),e.xp6(3),e.Q6J("ngForOf",t.get("monthValues").value),e.xp6(3),e.Q6J("ngForOf",o.days)}}function Ut(i,r){if(1&i&&(e.TgZ(0,"div",30)(1,"label",42),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",43)(5,"table",44)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",45),e.YNc(16,qt,10,4,"tr",46),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_QUARTER_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"DAY")),e.xp6(3),e.Q6J("ngForOf",t.quarterlyRemindersArray.controls)}}function Ot(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function wt(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function It(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,35),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",47),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(6,Ot,2,2,"option",24),e.qZA()(),e.TgZ(7,"td")(8,"select",48),e.NdJ("change",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onDateChange(a))}),e.YNc(9,wt,2,2,"option",24),e.qZA()(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.get("name").value),e.xp6(3),e.Q6J("ngForOf",t.get("monthValues").value),e.xp6(3),e.Q6J("ngForOf",o.days)}}function Yt(i,r){if(1&i&&(e.TgZ(0,"div",30)(1,"label",49),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",50)(5,"table",44)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",51),e.YNc(16,It,10,4,"tr",46),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"DAY")),e.xp6(3),e.Q6J("ngForOf",t.halfYearlyRemindersArray.controls)}}function Qt(i,r){if(1&i&&(e.TgZ(0,"div",5)(1,"div",28),e.YNc(2,Et,6,4,"div",29),e.YNc(3,Ft,7,4,"div",29),e.YNc(4,Ut,17,10,"div",29),e.YNc(5,Yt,17,10,"div",29),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","0"===t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","1"===t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","3"===t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","4"===t.reminderForm.get("frequency").value)}}function Mt(i,r){if(1&i&&(e.TgZ(0,"div",20)(1,"label",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",52)(5,"owl-date-time",null,53),e.qZA()),2&i){const t=e.MAs(6),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"REMINDER_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t)}}function Jt(i,r){if(1&i&&(e.TgZ(0,"div",20)(1,"label",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",54)(5,"owl-date-time",null,55),e.qZA()),2&i){const t=e.MAs(6),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"REMINDER_START_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t)}}function kt(i,r){if(1&i&&(e.TgZ(0,"div",20)(1,"label",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",56)(5,"owl-date-time",null,57),e.qZA()),2&i){const t=e.MAs(6);e.xp6(2),e.Oqu(e.lcZ(3,3,"REMINDER_END_DATE")),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("owlDateTime",t)}}function jt(i,r){1&i&&(e.TgZ(0,"div",58),e._UZ(1,"mat-spinner"),e.qZA())}let Gt=(()=>{class i extends C.H{get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}constructor(t,n,o,a){super(),this.fb=t,this.commonService=n,this.data=o,this.dialogRef=a,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.selectedUsers=[],this.isLoading=!1,this.dayOfWeek=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}],this.months=[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],this.days=[]}ngOnInit(){for(let t=1;t<=31;t++)this.days.push(t);this.getReminderFrequency(),this.createReminderForm(),this.getReminder()}closeDialog(){this.dialogRef.close()}getReminder(){this.sub$.sink=this.commonService.getMyReminder(this.data).subscribe(t=>{this.reminder={...t},this.reminder.dailyReminders&&(this.reminder.dailyReminders=this.reminder.dailyReminders.sort((n,o)=>n.dayOfWeek-o.dayOfWeek)),this.reminder.quarterlyReminders&&(this.reminder.quarterlyReminders=this.reminder.quarterlyReminders.sort((n,o)=>n.quarter-o.quarter)),this.reminder.halfYearlyReminders&&(this.reminder.halfYearlyReminders=this.reminder.halfYearlyReminders.sort((n,o)=>n.quarter-o.quarter)),this.reminderForm.patchValue(this.reminder),this.onFrequencyChange(),this.reminderForm.patchValue(this.reminder),this.reminderForm.get("isRepeated").value&&(this.reminderForm.get("frequency").setValidators([m.kI.required]),this.reminderForm.updateValueAndValidity())})}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}createReminderForm(){this.reminderForm=this.fb.group({id:[""],subject:[{value:"",disabled:!0},[m.kI.required]],message:[{value:"",disabled:!0},[m.kI.required]],frequency:[{value:"",disabled:!0}],isRepeated:[{value:!1,disabled:!0}],isEmailNotification:[{value:!1,disabled:!0}],startDate:[{value:new Date,disabled:!0},[m.kI.required]],endDate:[{value:null,disabled:!0}],dayOfWeek:[{value:null,disabled:!0}],documentId:[{value:null,disabled:!0}]})}checkData(t){t.checked?this.reminderForm.get("frequency").setValidators([m.kI.required]):this.reminderForm.get("frequency").setValidators([]),this.reminderForm.updateValueAndValidity()}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(t=>{if(this.users=t,this.reminder){const n=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.users.filter(o=>n.indexOf(o.id)>=0)}})}onFrequencyChange(){let t=this.reminderForm.get("frequency").value;t=0==t?"0":t,t==f.D.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==f.D.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(2)):t==f.D.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==f.D.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){const t=this.fb.array([]);t.push(this.createDailyReminderFormGroup(p.e.Sunday)),t.push(this.createDailyReminderFormGroup(p.e.Monday)),t.push(this.createDailyReminderFormGroup(p.e.Tuesday)),t.push(this.createDailyReminderFormGroup(p.e.Wednesday)),t.push(this.createDailyReminderFormGroup(p.e.Thursday)),t.push(this.createDailyReminderFormGroup(p.e.Friday)),t.push(this.createDailyReminderFormGroup(p.e.Saturday)),this.reminderForm.addControl("dailyReminders",t)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){const t=this.fb.array([]),n=this.months.filter(d=>[1,2,3].indexOf(d.id)>=0),o=this.months.filter(d=>[4,5,6].indexOf(d.id)>=0),a=this.months.filter(d=>[7,8,9].indexOf(d.id)>=0),c=this.months.filter(d=>[10,11,12].indexOf(d.id)>=0);t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter1,"Jan - Mar",n)),t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter2,"Apr - Jun",o)),t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter3,"Jul - Sept",a)),t.push(this.createQuarterlyReminderFormGroup(g.y.Quarter4,"Oct - Dec",c)),this.reminderForm.addControl("quarterlyReminders",t)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){const t=this.fb.array([]),n=this.months.filter(a=>[1,2,3,4,5,6].indexOf(a.id)>=0),o=this.months.filter(a=>[7,8,9,10,11,13].indexOf(a.id)>=0);t.push(this.createHalfYearlyReminderFormGroup(g.y.Quarter1,"Jan - Jun",n)),t.push(this.createHalfYearlyReminderFormGroup(g.y.Quarter2,"Jul - Dec",o)),this.reminderForm.addControl("halfYearlyReminders",t)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(t){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[t],isActive:[{value:!0,disabled:!0}],name:[p.e[t]]})}createQuarterlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[{value:this.getCurrentDay(),disabled:!0}],month:[{value:o[0],disabled:!0}],name:[n],monthValues:[o]})}createHalfYearlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[{value:this.getCurrentDay(),disabled:!0}],month:[{value:o[0],disabled:!0}],name:[n],monthValues:[o]})}getCurrentDay(){return(new Date).getDate()}onDateChange(t){const n=t.get("day").value,o=t.get("month").value;n>new Date((new Date).getFullYear(),Number.parseInt(o),0).getDate()&&(t.setErrors({invalidDate:"Invalid Date"}),t.markAllAsTouched())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.QS),e.Y36(y.v),e.Y36(_.WI),e.Y36(_.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-reminder"]],features:[e.qOj],decls:40,vars:22,consts:[[1,"d-flex"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content",""],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-4"],["color","primary","formControlName","isRepeated",3,"change"],[1,"col-md-2"],["color","primary","formControlName","isEmailNotification"],["class","row",4,"ngIf"],["class","form-group col-md-6",4,"ngIf"],["class","loading-shade",4,"ngIf"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate","placeholder","Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt2",""],["formControlName","startDate","placeholder","Start Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt3",""],["formControlName","endDate","placeholder","End Date",1,"form-control",3,"owlDateTimeTrigger","owlDateTime"],["dt4",""],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(5,"mat-icon",3),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"form",7)(11,"div",5)(12,"div",8)(13,"label",9),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",10),e.qZA()(),e.TgZ(17,"div",5)(18,"div",8)(19,"label",11),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"textarea",12),e.qZA()(),e.TgZ(23,"div",5)(24,"div",13)(25,"mat-checkbox",14),e.NdJ("change",function(a){return n.checkData(a)}),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",15)(29,"mat-checkbox",16),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e._UZ(32,"div",13),e.qZA(),e.YNc(33,Rt,11,8,"div",17),e.YNc(34,Qt,6,4,"div",17),e.TgZ(35,"div",5),e.YNc(36,Mt,7,6,"div",18),e.YNc(37,Jt,7,6,"div",18),e.YNc(38,kt,7,5,"div",18),e.qZA()()()(),e.YNc(39,jt,2,0,"div",19),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,12,"REMINDER_DETAIL")),e.xp6(8),e.Q6J("formGroup",n.reminderForm),e.xp6(4),e.hij(" ",e.lcZ(15,14,"SUBJECT"),""),e.xp6(6),e.hij(" ",e.lcZ(21,16,"MESSAGE"),""),e.xp6(6),e.hij(" ",e.lcZ(27,18,"REPEATE_REMINDER")," "),e.xp6(4),e.Oqu(e.lcZ(31,20,"SEND_EMAIL")),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(2),e.Q6J("ngIf",!n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[u.sg,u.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,R.RK,b.Hw,E.Ou,_.uh,_.xY,L.oG,F.VQ,F.U0,h.sZ,h.BO,h.hV,N.X$]}),i})();var Ht=s(1358),$t=s(727);class Vt{get count(){return this._count}constructor(r){this.commonService=r,this._reminderSubject$=new T.X([]),this._responseHeaderSubject$=new T.X(null),this.loadingSubject=new T.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this._responseHeaderSubject$.asObservable()}connect(){return this.sub$=new $t.w0,this._reminderSubject$.asObservable()}disconnect(){this._reminderSubject$.complete(),this.loadingSubject.complete(),this.sub$.unsubscribe()}loadData(r){this.loadingSubject.next(!0),this.sub$=this.commonService.getAllRemindersForCurrentUser(r).pipe((0,M.K)(()=>(0,H.of)([])),(0,$.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{const n=new Ht.E;n.pageSize=parseInt(t.headers.get("pageSize")),n.totalCount=parseInt(t.headers.get("totalCount")),n.skip=parseInt(t.headers.get("skip")),this._responseHeaderSubject$.next({...n});const o=[...t.body];this._count=o.length,this._reminderSubject$.next(o)})}}var ee=s(5485),l=s(671),Pt=s(2821),Bt=s(8475),te=s(8017);function Wt(i,r){1&i&&e._UZ(0,"th",26)}function Kt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",27)(1,"button",28),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onDetail(a))}),e._UZ(2,"i",29),e.qZA(),e._uU(3," \xa0\xa0 "),e.TgZ(4,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.deleteReminder(a))}),e._UZ(5,"i",31),e.qZA()()}}function zt(i,r){1&i&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DOCUMENT")," "))}function Xt(i,r){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.documentName," ")}}function ei(i,r){1&i&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE")," "))}function ti(i,r){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"utcToLocalTime"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.startDate,"short")," ")}}function ii(i,r){1&i&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"END_DATE")," "))}function ni(i,r){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"utcToLocalTime"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.endDate,"short")," ")}}function ri(i,r){1&i&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SUBJECT")," "))}function oi(i,r){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.subject,"100")," ")}}function ai(i,r){1&i&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE")," "))}function si(i,r){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.message,"150")," ")}}function mi(i,r){1&i&&(e.TgZ(0,"th",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FREQUENCY")," "))}function ci(i,r){if(1&i&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"frequency"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.frequency)," ")}}const di=function(){return[15,20,30]};function li(i,r){if(1&i&&(e.TgZ(0,"td",33),e._UZ(1,"mat-paginator",34),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("length",t.reminderResource.totalCount)("pageSize",t.reminderResource.pageSize)("pageSizeOptions",e.DdM(3,di))}}function ui(i,r){1&i&&e._UZ(0,"tr",35)}function pi(i,r){1&i&&e._UZ(0,"tr",36)}function _i(i,r){1&i&&e._UZ(0,"tr",37)}function hi(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",38)(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.BQk()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"NO_DATA_FOUND")))}function gi(i,r){1&i&&(e.TgZ(0,"div",39),e._UZ(1,"mat-spinner"),e.qZA())}let fi=(()=>{class i extends C.H{get SubjectFilter(){return this._subjectFilter}set SubjectFilter(t){this._subjectFilter=t,this.filterObservable$.next(`subject:${t}`)}set FrequencyFilter(t){this._frequencyFilter="0"==t?"0":t?t.toString():"",this.filterObservable$.next(`frequency:${this._frequencyFilter}`)}get FrequencyFilter(){return this._frequencyFilter}get MessageFilter(){return this._messageFilter}set MessageFilter(t){this._messageFilter=t,this.filterObservable$.next(`message:${t}`)}constructor(t,n,o,a,c,d){super(),this.dialog=t,this.commonService=n,this.commonDialogService=o,this.toastrService=a,this.dialogRef=c,this.translationService=d,this.reminders=[],this.reminderFrequencies=[],this.displayedColumns=["action","documentName","startDate","endDate","subject","message","frequency"],this.footerToDisplayed=["footer"],this.isLoadingResults=!0,this.filterObservable$=new Zt.x,this.reminderResource=new xt.t,this.reminderResource.pageSize=15,this.reminderResource.orderBy="startDate desc"}ngOnInit(){this.getReminderFrequency(),this.dataSource=new Vt(this.commonService),this.dataSource.loadData(this.reminderResource),this.sub$.sink=this.filterObservable$.pipe((0,x.b)(1e3),(0,Z.x)()).subscribe(t=>{this.reminderResource.skip=0;const n=t.split(":");"subject"===n[0]?this.reminderResource.subject=escape(n[1]):"message"===n[0]?this.reminderResource.message=n[1]:"frequency"===n[0]&&(this.reminderResource.frequency=n[1]),this.dataSource.loadData(this.reminderResource)}),this.getResourceParameter()}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,G.T)(this.sort.sortChange,this.paginator.page).pipe((0,A.b)(t=>{this.reminderResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.reminderResource.pageSize=this.paginator.pageSize,this.reminderResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.reminderResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.reminderResource.pageSize=t.pageSize,this.reminderResource.skip=t.skip,this.reminderResource.totalCount=t.totalCount)})}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}closeDialog(){this.dialogRef.close()}deleteReminder(t){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(n=>{n&&(this.isLoadingResults=!0,this.commonService.deleteReminderCurrentUser(t.id).subscribe(()=>{this.isLoadingResults=!1,this.toastrService.success(this.translationService.getValue("REMINDER_DELETED_SUCCESSFULLY")),this.dataSource.loadData(this.reminderResource)},()=>this.isLoadingResults=!1))})}onDetail(t){this.dialog.open(Gt,{data:t.id,width:"80vw",height:"80vh"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.uw),e.Y36(y.v),e.Y36(ee.V),e.Y36(O._W),e.Y36(_.so),e.Y36(w.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reminder-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S.NW,5),e.Gf(v.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first)}},features:[e.qOj],decls:41,vars:11,consts:[[1,"d-flex"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button","ms-auto",3,"click"],["color","warn",1,"close-icon"],["mat-dialog-content",""],[1,"row"],[1,"col-sm-12"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","documentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","subject"],["matColumnDef","message"],["matColumnDef","frequency"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],[4,"ngIf"],["class","loading-shade",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"fas","fa-eye"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],["mat-header-cell","","mat-sort-header",""],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"col-sm-12","m-t-15"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(5,"mat-icon",3),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"table",8),e.ynx(12,9),e.YNc(13,Wt,1,0,"th",10),e.YNc(14,Kt,6,0,"td",11),e.BQk(),e.ynx(15,12),e.YNc(16,zt,3,3,"th",13),e.YNc(17,Xt,2,1,"td",11),e.BQk(),e.ynx(18,14),e.YNc(19,ei,3,3,"th",13),e.YNc(20,ti,3,4,"td",11),e.BQk(),e.ynx(21,15),e.YNc(22,ii,3,3,"th",13),e.YNc(23,ni,3,4,"td",11),e.BQk(),e.ynx(24,16),e.YNc(25,ri,3,3,"th",13),e.YNc(26,oi,3,4,"td",11),e.BQk(),e.ynx(27,17),e.YNc(28,ai,3,3,"th",13),e.YNc(29,si,3,4,"td",11),e.BQk(),e.ynx(30,18),e.YNc(31,mi,3,3,"th",13),e.YNc(32,ci,3,3,"td",11),e.BQk(),e.ynx(33,19),e.YNc(34,li,2,4,"td",20),e.BQk(),e.YNc(35,ui,1,0,"tr",21),e.YNc(36,pi,1,0,"tr",22),e.YNc(37,_i,1,0,"tr",23),e.qZA(),e.YNc(38,hi,5,3,"ng-container",24),e.qZA()()()(),e.YNc(39,gi,2,0,"div",25),e.ALo(40,"async")),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,7,"REMINDERS")),e.xp6(9),e.Q6J("dataSource",n.dataSource),e.xp6(24),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("matFooterRowDef",n.footerToDisplayed),e.xp6(1),e.Q6J("ngIf",0==n.dataSource.count),e.xp6(1),e.Q6J("ngIf",e.lcZ(40,9,n.dataSource.loading$)))},dependencies:[u.O5,R.RK,b.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.mD,l.Ke,l.ge,l.ev,l.yh,l.XQ,l.Gk,l.Q2,E.Ou,_.uh,_.xY,v.YE,v.nU,S.NW,u.Ov,N.X$,Pt.W,Bt.y,te.M]}),i})();var vi=s(775),Ai=s(6316),Ti=s(3631),Di=s(4630),xi=s(9917),Zi=s(2491),ie=s(529),Ci=s(8032);let yi=(()=>{class i{constructor(t,n){this.httpClient=t,this.commonHttpErrorService=n}getDocuments(t){const o=(new ie.LE).set("fields",t.fields).set("orderBy",t.orderBy).set("pageSize",t.pageSize.toString()).set("skip",t.skip.toString()).set("createDateString",t.createDate?t.createDate.toString():"").set("searchQuery",t.searchQuery).set("categoryId",t.categoryId).set("name",t.name).set("farmerid",t.farmerid).set("metaTags",t.metaTags).set("id",t.id.toString());return this.httpClient.get("document/assignedDocuments",{params:o,observe:"response"}).pipe((0,M.K)(this.commonHttpErrorService.handleError))}getDocumentLibrary(t){return this.httpClient.get("document/"+t)}getDocumentViewLibrary(t){return this.httpClient.get("document/view/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ie.eN),e.LFG(Ci.U))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ri=s(1218),bi=s(8265),Y=s(8255),Ei=s(1676);const Li=["input"],Fi=["metatag"],Ni=["farmerid"],Si=function(){return["/All-Documents"]};function qi(i,r){1&i&&(e.TgZ(0,"a",50)(1,"span",14),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.Q6J("routerLink",e.DdM(4,Si)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ALL_DOCUMENTS"),""))}const Ui=function(){return["/add"]};function Oi(i,r){1&i&&(e.TgZ(0,"a",51),e._UZ(1,"app-feather-icons",13),e.TgZ(2,"span",14),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.Q6J("routerLink",e.DdM(7,Ui)),e.xp6(1),e.Tol("btn-success"),e.Q6J("icon","Plus"),e.xp6(2),e.hij(" ",e.lcZ(4,5,"ADD_DOCUMENT"),""))}function wi(i,r){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name,"")}}function Ii(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const Yi=function(i){return{"margin-left.px":i}};function Qi(i,r){if(1&i&&(e.TgZ(0,"mat-option",25)(1,"div",52),e.YNc(2,wi,3,1,"div",53),e.YNc(3,Ii,2,1,"div",53),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngStyle",e.VKq(4,Yi,20*t.deafLevel)),e.xp6(1),e.Q6J("ngIf",!t.parentId),e.xp6(1),e.Q6J("ngIf",t.parentId)}}function Mi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"th",54)(1,"mat-checkbox",55),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(o?a.masterToggle():null)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function Ji(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",56)(1,"mat-checkbox",57),e.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(o?d.selection.toggle(c):null)}),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))}}function ki(i,r){1&i&&(e.TgZ(0,"th",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"ACTION")," "))}function ji(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",66),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editDocument(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"EDIT")," "))}function Gi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.manageDocumentPermission(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"share"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"SHARE")," "))}function Hi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.uploadNewVersion(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"upload"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"UPLOAD_NEW_VERSION_FILE")," "))}function $i(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.sendEmail(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"forward_to_inbox"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"SEND_EMAIL")," "))}function Vi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.deleteDocument(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"DELETE")," "))}function Pi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",56)(1,"button",59)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,60)(6,"button",61),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onDocumentView(a))}),e.TgZ(7,"mat-icon"),e._uU(8,"visibility"),e.qZA(),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,ji,5,3,"button",62),e.YNc(12,Gi,5,3,"button",63),e.YNc(13,Hi,5,3,"button",63),e.TgZ(14,"button",64),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onVersionHistoryClick(a))}),e.TgZ(15,"mat-icon"),e._uU(16," history"),e.qZA(),e._uU(17," Version History "),e.qZA(),e.TgZ(18,"button",61),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addComment(a))}),e.TgZ(19,"mat-icon"),e._uU(20," chat"),e.qZA(),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",61),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.addReminder(a))}),e.TgZ(24,"mat-icon"),e._uU(25,"notifications"),e.qZA(),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,$i,5,3,"button",65),e.YNc(29,Vi,5,3,"button",63),e.qZA()()}if(2&i){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(8),e.hij(" ",e.lcZ(10,9,"VIEW")," "),e.xp6(2),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_EDIT_DOCUMENT"),e.xp6(1),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_SHARE_DOCUMENT"),e.xp6(1),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_UPLOAD_NEW_VERSION"),e.xp6(8),e.hij(" ",e.lcZ(22,11,"COMMENT")," "),e.xp6(5),e.hij(" ",e.lcZ(27,13,"ADD_REMINDER")," "),e.xp6(2),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_SEND_EMAIL"),e.xp6(1),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_DELETE_DOCUMENT")}}function Bi(i,r){1&i&&(e.TgZ(0,"th",67),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NAME")," "))}function Wi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",56)(1,"a",68),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onDocumentView(a))}),e._uU(2),e.qZA()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function Ki(i,r){1&i&&(e.TgZ(0,"th",67),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"META_TAGS")," "))}function zi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",56)(1,"a",68),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onDocumentView(a))}),e._uU(2),e.qZA()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.farmerid)}}function Xi(i,r){1&i&&(e.TgZ(0,"th",67),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CATEGORY_NAME")," "))}function en(i,r){if(1&i&&(e.TgZ(0,"td",56),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.categoryName," ")}}function tn(i,r){1&i&&(e.TgZ(0,"th",67),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CREATED_DATE")," "))}function nn(i,r){if(1&i&&(e.TgZ(0,"td",56),e._uU(1),e.ALo(2,"utcToLocalTime"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.createdDate,"shortDate")," ")}}function rn(i,r){1&i&&(e.TgZ(0,"th",67),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTRACT_DISTRICT")," "))}function on(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",56)(1,"a",68),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onDocumentView(a))}),e._uU(2),e.qZA()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.district)}}function an(i,r){1&i&&e._UZ(0,"tr",69)}function sn(i,r){1&i&&e._UZ(0,"tr",70)}function mn(i,r){1&i&&(e.TgZ(0,"div",71),e._UZ(1,"mat-spinner"),e.qZA())}const cn=function(){return[10,20,30]};let dn=(()=>{class i extends C.H{constructor(t,n,o,a,c,d,q,U,J,k,Tn){super(),this.documentLibraryService=t,this.categoryService=n,this.overlay=o,this.clonerService=a,this.documentService=c,this.translationService=d,this.commonService=q,this.toastrService=U,this.dialog=J,this.commonDialogService=k,this.datePipe=Tn,this.documents=[],this.displayedColumns=["action","name","farmerid","district","categoryName","createdDate"],this.isLoadingResults=!0,this.categories=[],this.allCategories=[],this.selection=new ae.Ov(!0,[]),this.createdDate=new m.NI(""),this.max=new Date,this.documentResource=new ne.J,this.documentResource.pageSize=10,this.documentResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new oe(this.documentLibraryService),this.dataSource.loadDocuments(this.documentResource),this.getCategories(),this.getResourceParameter()}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,G.T)(this.sort.sortChange,this.paginator.page).pipe((0,A.b)(()=>{this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocuments(this.documentResource),this.selection.clear()})).subscribe(),this.sub$.sink=(0,Q.R)(this.input.nativeElement,"keyup").pipe((0,x.b)(1e3),(0,Z.x)(),(0,A.b)(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.name=this.input.nativeElement.value,this.dataSource.loadDocuments(this.documentResource),this.selection.clear()})).subscribe(),this.sub$.sink=(0,Q.R)(this.farmerid.nativeElement,"keyup").pipe((0,x.b)(1e3),(0,Z.x)(),(0,A.b)(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.farmerid=this.farmerid.nativeElement.value,this.dataSource.loadDocuments(this.documentResource),this.selection.clear()})).subscribe(),this.sub$.sink=(0,Q.R)(this.metatag.nativeElement,"keyup").pipe((0,x.b)(1e3),(0,Z.x)(),(0,A.b)(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.metaTags=this.metatag.nativeElement.value,this.dataSource.loadDocuments(this.documentResource)})).subscribe(),this.sub$.sink=this.createdDate.valueChanges.pipe((0,x.b)(1e3),(0,Z.x)(),(0,A.b)(t=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.createDate=t?new Date(t).toISOString():null,this.documentResource.skip=0,this.dataSource.loadDocuments(this.documentResource)})).subscribe()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}onCategoryChange(t){this.documentResource.categoryId=t.value?t.value:"",this.documentResource.skip=0,this.dataSource.loadDocuments(this.documentResource)}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(t=>{this.categories=t,this.setDeafLevel()})}setDeafLevel(t,n){const o=this.categories.filter(a=>a.parentId==n);return o.length>0&&o.map((a,c)=>{a.deafLevel=t?t.deafLevel+1:0,a.index=(t?t.index:0)+c*Math.pow(.1,a.deafLevel),this.allCategories.push(a),this.setDeafLevel(a,a.id)}),t}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.documentResource.pageSize=t.pageSize,this.documentResource.skip=t.skip,this.documentResource.totalCount=t.totalCount)})}getDocuments(){this.isLoadingResults=!0,this.sub$.sink=this.documentLibraryService.getDocuments(this.documentResource).subscribe(t=>{const n=JSON.parse(t.headers.get("X-Pagination"));this.documentResource.pageSize=n.pageSize,this.documentResource.skip=n.skip,this.documents=[...t.body],console.log(this.documents),this.isLoadingResults=!1},()=>this.isLoadingResults=!1)}getExpiryDate(t,n){return t&&n?t>n?t:n:t||n||null}addReminder(t){this.dialog.open(je,{data:t,width:"80vw",height:"80vh"})}onReminderList(){this.dialog.open(fi,{data:null,width:"80vw",maxHeight:"80vh"})}onAddDocument(){const t=this.dialog.open(X,{data:null,width:"80vw",maxHeight:"80vh"});this.sub$.sink=t.afterClosed().subscribe(n=>{n&&this.dataSource.loadDocuments(this.documentResource)})}onDocumentView(t){const o=t.url.split(".")[1];this.overlay.open(se.Y,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:t.id,name:t.name,farmerid:t.farmerid,district:t.district,extension:o,isRestricted:t.isAllowDownload,isVersion:!1,isFromPreview:!1}})}addDocumentTrail(t,n){this.sub$.sink=this.commonService.addDocumentAuditTrail({documentId:t,operationName:n}).subscribe(()=>{})}downloadFile(t,n){const o=new Blob([t.body],{type:t.body.type}),a=document.createElement("a");a.setAttribute("style","display:none;"),document.body.appendChild(a),a.download=n.name,a.href=URL.createObjectURL(o),a.target="_blank",a.click(),document.body.removeChild(a)}addComment(t){const n=this.dialog.open(vi.L,{width:"800px",maxHeight:"70vh",data:Object.assign({},t)});this.sub$.sink=n.afterClosed().subscribe(o=>{"loaded"===o&&this.dataSource.loadDocuments(this.documentResource)})}editDocument(t){const o=this.dialog.open(Ti.c,{width:"600px",data:Object.assign({},{document:t,categories:this.categories})});this.sub$.sink=o.afterClosed().subscribe(a=>{"loaded"===a&&this.dataSource.loadDocuments(this.documentResource)})}onVersionHistoryClick(t){const n=this.clonerService.deepClone(t);this.sub$.sink=this.documentService.getDocumentVersion(t.id).subscribe(o=>{n.documentVersions=o,this.dialog.open(Ai.F,{width:"800px",maxHeight:"70vh",panelClass:"full-width-dialog",data:Object.assign({},n)})})}manageDocumentPermission(t){this.dialog.open(Di.z,{data:t,width:"80vw",height:"80vh"})}uploadNewVersion(t){const n=this.dialog.open(xi.B,{width:"800px",maxHeight:"70vh",data:Object.assign({},t)});this.sub$.sink=n.afterClosed().subscribe(o=>{o&&this.dataSource.loadDocuments(this.documentResource)})}sendEmail(t){this.dialog.open(Zi.P,{data:t,width:"80vw",height:"80vh"})}deleteDocument(t){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${t.name}`).subscribe(n=>{n&&(this.sub$.sink=this.documentService.deleteDocument(t.id).subscribe(()=>{this.addDocumentTrail(t.id,P.g.Deleted.toString()),this.toastrService.success(this.translationService.getValue("DOCUMENT_DELETED_SUCCESSFULLY")),this.dataSource.loadDocuments(this.documentResource)}))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(yi),e.Y36(B.H),e.Y36(Ri.T),e.Y36(bi.$),e.Y36(W.Z),e.Y36(w.D),e.Y36(y.v),e.Y36(O._W),e.Y36(_.uw),e.Y36(ee.V),e.Y36(u.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-document-library-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S.NW,5),e.Gf(v.YE,5),e.Gf(Li,5),e.Gf(Fi,5),e.Gf(Ni,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first),e.iGM(o=e.CRH())&&(n.input=o.first),e.iGM(o=e.CRH())&&(n.metatag=o.first),e.iGM(o=e.CRH())&&(n.farmerid=o.first)}},features:[e._Bn([],[u.uU]),e.qOj],decls:88,vars:55,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"breadcrumb-list"],[1,"breadcrumb-item"],["class","btn btn-outline-success btn-sm",3,"routerLink",4,"hasClaim"],[1,"breadcrumb-item","bcrumb-1"],["class","btn btn-outline-success btn-sm m-r-10",3,"routerLink",4,"hasClaim"],[1,"btn","btn-red","btn-sm","m-r-10","text-white",3,"click"],[3,"icon"],[1,"d-none","d-sm-inline"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-md-4"],[1,"form-label"],[1,"form-control",3,"placeholder"],["input",""],[1,"col-md-3"],[1,"form-select",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["farmerid",""],[1,"form-control",3,"max","placeholder","formControl","owlDateTimeTrigger","owlDateTime"],[3,"pickerType"],["date1",""],[1,"col"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["style","width:100px;","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","farmerid"],["matColumnDef","categoryName"],["matColumnDef","createdDate"],["matColumnDef","district"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["class","loading-shade",4,"ngIf"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink"],[1,"btn","btn-outline-success","btn-sm","m-r-10",3,"routerLink"],[1,"country-item",3,"ngStyle"],[4,"ngIf"],["mat-header-cell","",2,"width","100px"],["color","primary",3,"checked","indeterminate","change"],["mat-cell",""],["color","primary",3,"checked","click","change"],["mat-header-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",3,"click"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-cell","","mat-sort-header",""],[1,"doc-link",3,"click"],["mat-header-row",""],["mat-row",""],[1,"loading-shade"]],template:function(t,n){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",5)(11,"ul",7)(12,"li",8),e.YNc(13,qi,4,5,"a",9),e.qZA(),e.TgZ(14,"li",10),e.YNc(15,Oi,5,8,"a",11),e.TgZ(16,"a",12),e.NdJ("click",function(){return n.onReminderList()}),e._UZ(17,"app-feather-icons",13),e.TgZ(18,"span",14),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()()()()(),e.TgZ(21,"div",4)(22,"div",15)(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"label",20),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"input",21,22),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",23)(34,"label",20),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"mat-select",24),e.NdJ("selectionChange",function(a){return n.onCategoryChange(a)}),e.ALo(38,"translate"),e.TgZ(39,"mat-option",25),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.YNc(42,Qi,4,6,"mat-option",26),e.qZA()(),e.TgZ(43,"div",27)(44,"label",20),e._uU(45),e.ALo(46,"translate"),e.qZA(),e._UZ(47,"input",21,28),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",27)(51,"label",20),e._uU(52),e.ALo(53,"translate"),e.qZA(),e._UZ(54,"input",29),e.ALo(55,"translate"),e._UZ(56,"owl-date-time",30,31),e.qZA()(),e.TgZ(58,"div",4)(59,"div",32)(60,"div",33)(61,"table",34),e.ynx(62,35),e.YNc(63,Mi,2,2,"th",36),e.YNc(64,Ji,2,1,"td",37),e.BQk(),e.ynx(65,38),e.YNc(66,ki,3,3,"th",39),e.YNc(67,Pi,30,15,"td",37),e.BQk(),e.ynx(68,40),e.YNc(69,Bi,3,3,"th",41),e.YNc(70,Wi,3,1,"td",37),e.BQk(),e.ynx(71,42),e.YNc(72,Ki,3,3,"th",41),e.YNc(73,zi,3,1,"td",37),e.BQk(),e.ynx(74,43),e.YNc(75,Xi,3,3,"th",41),e.YNc(76,en,2,1,"td",37),e.BQk(),e.ynx(77,44),e.YNc(78,tn,3,3,"th",41),e.YNc(79,nn,3,4,"td",37),e.BQk(),e.ynx(80,45),e.YNc(81,rn,3,3,"th",41),e.YNc(82,on,3,1,"td",37),e.BQk(),e.YNc(83,an,1,0,"tr",46),e.YNc(84,sn,1,0,"tr",47),e.qZA(),e._UZ(85,"mat-paginator",48),e.qZA()()()()()()()()(),e.YNc(86,mn,2,0,"div",49),e.ALo(87,"async")),2&t){const o=e.MAs(57);e.xp6(8),e.Oqu(e.lcZ(9,30,"ASSIGNED_DOCUMENTS")),e.xp6(5),e.Q6J("hasClaim","ALL_DOCUMENTS_CREATE_DOCUMENT"),e.xp6(2),e.Q6J("hasClaim","ASSIGNED_DOCUMENTS_CREATE_DOCUMENT"),e.xp6(2),e.Tol("btn-danger"),e.Q6J("icon","list"),e.xp6(2),e.hij(" ",e.lcZ(20,32,"MY_REMINDERS"),""),e.xp6(9),e.Oqu(e.lcZ(29,34,"SEARCH_DOCUMENT_BY_NAME_OR_DESCRIPTION")),e.xp6(2),e.s9C("placeholder",e.lcZ(32,36,"SEARCH_DOCUMENT_BY_NAME_OR_DESCRIPTION")),e.xp6(5),e.Oqu(e.lcZ(36,38,"SELECT_CATEGORY")),e.xp6(2),e.s9C("placeholder",e.lcZ(38,40,"SELECT_CATEGORY")),e.xp6(3),e.hij("-- ",e.lcZ(41,42,"NONE")," --"),e.xp6(2),e.Q6J("ngForOf",n.allCategories),e.xp6(3),e.Oqu(e.lcZ(46,44,"SEARCH_DOCUMENT_BY_META_TAGS")),e.xp6(2),e.s9C("placeholder",e.lcZ(49,46,"SEARCH_DOCUMENT_BY_META_TAGS")),e.xp6(5),e.Oqu(e.lcZ(53,48,"CREATED_DATE")),e.xp6(2),e.s9C("placeholder",e.lcZ(55,50,"CREATED_DATE")),e.Q6J("max",n.max)("formControl",n.createdDate)("owlDateTimeTrigger",o)("owlDateTime",o),e.xp6(2),e.Q6J("pickerType","calendar"),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("length",n.documentResource.totalCount)("pageSize",n.documentResource.pageSize)("pageSizeOptions",e.DdM(54,cn)),e.xp6(1),e.Q6J("ngIf",e.lcZ(87,52,n.dataSource.loading$))}},dependencies:[u.sg,u.O5,u.PC,m.Fj,m.JJ,m.oH,D.rH,R.RK,b.Hw,Y.VK,Y.OP,Y.p6,Ei.A,K.d,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,E.Ou,I.gD,z.ey,v.YE,v.nU,S.NW,L.oG,h.sZ,h.BO,h.hV,u.Ov,N.X$,te.M],styles:[".breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{float:left;padding-right:var(--bs-breadcrumb-item-padding-x);color:var(--bs-breadcrumb-divider-color);content:none!important}",".btn-green[_ngcontent-%COMP%]{\n    background: #32977F !important;\n  }\n  .btn-green[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: #ffff !important;\n    width: 20px !important;\n    height: 20px !important;\n  }\n  .btn-green-color[_ngcontent-%COMP%]{\n    color: #ffff !important;\n  }\n  .btn-red[_ngcontent-%COMP%]{\n    border: 1px solid red !important;\n    background-color: white !important;\n    color: red !important;\n  }\n  \n  .btn-red[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: red !important;\n    width: 20px !important;\n    height: 20px !important;\n  }"]}),i})();var ln=s(319);const un=[{path:"",component:dn},{path:"add",component:X,data:{claimType:"ASSIGNED_DOCUMENTS_CREATE_DOCUMENT"},canActivate:[ln.a]}];let pn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[D.Bz.forChild(un),D.Bz]}),i})();var _n=s(3417),hn=s(4586),gn=s(4144),fn=s(455),vn=s(3162);let An=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,_n.m,m.UX,pn,l.p0,E.Cq,_.Is,I.LD,fn.rP,v.JX,S.TU,gn.c,L.p9,m.u5,hn.D,R.ot,b.Ps,F.Fk,Y.Tx,vn.Cv,h.Ll,h.x]}),i})()}}]);