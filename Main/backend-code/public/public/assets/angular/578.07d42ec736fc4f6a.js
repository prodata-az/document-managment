"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[578],{1312:(D,d,n)=>{n.d(d,{E:()=>l});class l{constructor(){this.totalCount=0,this.pageSize=0,this.skip=0,this.totalPages=0}}},4913:(D,d,n)=>{n.d(d,{J:()=>m});var l=n(5519);class m extends l.r{constructor(){super(...arguments),this.id="",this.createdBy="",this.categoryId=""}}},2760:(D,d,n)=>{n.d(d,{c:()=>m});const m=[{id:0,name:"Daily"},{id:1,name:"Weekly"},{id:2,name:"Monthly"},{id:3,name:"Quarterly"},{id:4,name:"Half Yearly"},{id:5,name:"Yearly"}]},5519:(D,d,n)=>{n.d(d,{r:()=>l});class l{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0,this.metaTags="",this.farmerid=""}}},6943:(D,d,n)=>{n.d(d,{H:()=>A});var l=n(262),m=n(4650),h=n(529),C=n(8032);let A=(()=>{class v{constructor(s,p){this.httpClient=s,this.commonHttpErrorService=p}getAllCategories(){return this.httpClient.get("category")}delete(s){return this.httpClient.delete(`category/${s}`)}update(s){return this.httpClient.put(`category/${s.id}`,s)}add(s){return this.httpClient.post("category",s).pipe((0,l.K)(this.commonHttpErrorService.handleError))}getSubCategories(s){return this.httpClient.get(`category/${s}/subcategories`)}getAllCategoriesForDropDown(){return this.httpClient.get("category/dropdown")}}return v.\u0275fac=function(s){return new(s||v)(m.LFG(h.eN),m.LFG(C.U))},v.\u0275prov=m.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},690:(D,d,n)=>{n.d(d,{v:()=>_});var l=n(529),m=n(9646),h=n(262),C=n(2760),A=n(4650),v=n(8032);let _=(()=>{class s{constructor(i,c){this.httpClient=i,this.commonHttpErrorService=c}getUsers(){return this.httpClient.get("user").pipe((0,h.K)(this.commonHttpErrorService.handleError))}getUsersForDropdown(){return this.httpClient.get("user-dropdown").pipe((0,h.K)(this.commonHttpErrorService.handleError))}getRoles(){return this.httpClient.get("role").pipe((0,h.K)(this.commonHttpErrorService.handleError))}getRolesForDropdown(){return this.httpClient.get("role-dropdown").pipe((0,h.K)(this.commonHttpErrorService.handleError))}getMyReminder(i){return this.httpClient.get(`reminder/${i}/myreminder`).pipe((0,h.K)(this.commonHttpErrorService.handleError))}getReminder(i){return this.httpClient.get(`reminder/${i}`).pipe((0,h.K)(this.commonHttpErrorService.handleError))}addDocumentAuditTrail(i){return this.httpClient.post("documentAuditTrail",i).pipe((0,h.K)(this.commonHttpErrorService.handleError))}downloadDocument(i,c){return this.httpClient.get(`document/${i}/download/${c} `,{reportProgress:!0,observe:"events",responseType:"blob"})}isDownloadFlag(i,c){return this.httpClient.get(`document/${i}/isDownloadFlag/isPermission/${c}`)}getDocumentToken(i){return this.httpClient.get(`documentToken/${i}/token`)}deleteDocumentToken(i){return this.httpClient.delete(`documentToken/${i}`)}readDocument(i,c){return this.httpClient.get(`document/${i}/readText/${c}`)}getReminderFrequency(){return(0,m.of)(C.c)}getAllRemindersForCurrentUser(i){const f=(new l.LE).set("fields",i.fields?i.fields:"").set("orderBy",i.orderBy?i.orderBy:"").set("pageSize",i.pageSize.toString()).set("skip",i.skip.toString()).set("searchQuery",i.searchQuery?i.searchQuery:"").set("subject",i.subject?i.subject:"").set("message",i.message?i.message:"").set("frequency",i.frequency?i.frequency:"");return this.httpClient.get("reminder/all/currentuser",{params:f,observe:"response"})}deleteReminderCurrentUser(i){return this.httpClient.delete(`reminder/currentuser/${i}`)}}return s.\u0275fac=function(i){return new(i||s)(A.LFG(l.eN),A.LFG(v.U))},s.\u0275prov=A.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},8578:(D,d,n)=>{n.r(d),n.d(d,{DocumentAuditTrailModule:()=>gt});var l=n(6895),m=n(8988),h=n(319),C=n(8739),A=n(6308),v=n(4913),_=n(6451),s=n(4968),p=n(8505),i=n(8372),c=n(1884),f=n(2676),x=n(1312),S=n(1135),O=n(9646),E=n(262),L=n(8746);class N{get count(){return this._count}constructor(r){this.documentAuditTrailService=r,this.documentAuditTrailsSubject=new S.X([]),this.responseHeaderSubject=new S.X(null),this.loadingSubject=new S.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}connect(r){return this.documentAuditTrailsSubject.asObservable()}disconnect(r){this.documentAuditTrailsSubject.complete(),this.loadingSubject.complete()}loadDocumentAuditTrails(r){this.loadingSubject.next(!0),this.documentAuditTrailService.getDocumentAuditTrials(r).pipe((0,E.K)(()=>(0,O.of)([])),(0,L.x)(()=>this.loadingSubject.next(!1))).subscribe(o=>{const a=new x.E;a.pageSize=parseInt(o.headers.get("pageSize")),a.totalCount=parseInt(o.headers.get("totalCount")),a.skip=parseInt(o.headers.get("skip")),this.responseHeaderSubject.next(a);const u=[...o.body];this._count=u.length,this.documentAuditTrailsSubject.next(u)})}}var t=n(4650),y=n(529),M=n(8032);let I=(()=>{class e{constructor(o,a){this.httpClient=o,this.commonHttpErrorService=a}getDocumentAuditTrials(o){const u=(new y.LE).set("fields",o.fields).set("orderBy",o.orderBy).set("pageSize",o.pageSize.toString()).set("skip",o.skip.toString()).set("searchQuery",o.searchQuery).set("categoryId",o.categoryId).set("name",o.name).set("id",o.id.toString()).set("createdBy",o.createdBy.toString());return this.httpClient.get("documentAuditTrail",{params:u,observe:"response"}).pipe((0,E.K)(this.commonHttpErrorService.handleError))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(y.eN),t.LFG(M.U))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var B=n(6943),j=n(690),T=n(671),Z=n(1572),R=n(4385),Y=n(3238),U=n(9383),b=n(8017);const H=["input"];function $(e,r){if(1&e&&(t.TgZ(0,"div")(1,"b"),t._uU(2),t.qZA()()),2&e){const o=t.oxw().$implicit;t.xp6(2),t.hij(" ",o.name,"")}}function Q(e,r){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.name," ")}}const F=function(e){return{"margin-left.px":e}};function z(e,r){if(1&e&&(t.TgZ(0,"mat-option",16)(1,"div",35),t.YNc(2,$,3,1,"div",32),t.YNc(3,Q,2,1,"div",32),t.qZA()()),2&e){const o=r.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Q6J("ngStyle",t.VKq(4,F,20*o.deafLevel)),t.xp6(1),t.Q6J("ngIf",!o.parentId),t.xp6(1),t.Q6J("ngIf",o.parentId)}}function K(e,r){if(1&e&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.id),t.xp6(1),t.AsE(" ",o.firstName," ",o.lastName," ")}}function P(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NAME")," "))}function J(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",o.documentName," ")}}function W(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CATEGORY_NAME")," "))}function G(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",o.categoryName," ")}}function w(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&e&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"ACTION")," ",t.lcZ(3,4,"DATE"),""))}function k(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.ALo(2,"utcToLocalTime"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==o?null:o.createdDate,"short")," ")}}function X(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"OPERATION")," "))}function V(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",o.operationName," ")}}function q(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BY_WHOM")," "))}function tt(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",null==o?null:o.createdBy," ")}}function et(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TO_WHOM_USER")," "))}function ot(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",null==o?null:o.permissionUser," ")}}function nt(e,r){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TO_WHOM_ROLE")," "))}function it(e,r){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",null==o?null:o.permissionRole," ")}}function rt(e,r){1&e&&t._UZ(0,"tr",38)}function at(e,r){1&e&&t._UZ(0,"tr",39)}function st(e,r){1&e&&(t.ynx(0),t.TgZ(1,"div",40)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.BQk()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"NO_DATA_FOUND")))}function ct(e,r){1&e&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t.qZA())}const ut=function(){return[10,20,30]},lt=[{path:"",component:(()=>{class e extends f.H{constructor(o,a,u){super(),this.documentAuditTrailService=o,this.categoryService=a,this.commonService=u,this.documentAuditTrails=[],this.displayedColumns=["createdDate","documentName","categoryName","operationName","createdBy","permissionUser","permissionRole"],this.isLoadingResults=!0,this.categories=[],this.allCategories=[],this.users=[],this.documentResource=new v.J,this.documentResource.pageSize=10,this.documentResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new N(this.documentAuditTrailService),this.dataSource.loadDocumentAuditTrails(this.documentResource),this.getCategories(),this.getResourceParameter(),this.getUsers()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,_.T)(this.sort.sortChange,this.paginator.page).pipe((0,p.b)(()=>{this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocumentAuditTrails(this.documentResource)})).subscribe(),this.sub$.sink=(0,s.R)(this.input.nativeElement,"keyup").pipe((0,i.b)(1e3),(0,c.x)(),(0,p.b)(()=>{this.paginator.pageIndex=0,this.documentResource.name=this.input.nativeElement.value,this.dataSource.loadDocumentAuditTrails(this.documentResource)})).subscribe()}onCategoryChange(o){this.documentResource.categoryId=o.value?o.value:"",this.documentResource.skip=0,this.dataSource.loadDocumentAuditTrails(this.documentResource)}onUserChange(o){this.documentResource.createdBy=o.value?o.value:"",this.documentResource.skip=0,this.dataSource.loadDocumentAuditTrails(this.documentResource)}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(o=>{this.categories=o,this.setDeafLevel()})}setDeafLevel(o,a){const u=this.categories.filter(g=>g.parentId==a);return u.length>0&&u.map((g,Tt)=>{g.deafLevel=o?o.deafLevel+1:0,g.index=(o?o.index:0)+Tt*Math.pow(.1,g.deafLevel),this.allCategories.push(g),this.setDeafLevel(g,g.id)}),o}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(o=>{this.users=o},o=>{o.messages.forEach(()=>{})})}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(o=>{o&&(this.documentResource.pageSize=o.pageSize,this.documentResource.skip=o.skip,this.documentResource.totalCount=o.totalCount)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(I),t.Y36(B.H),t.Y36(j.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-document-audit-trail"]],viewQuery:function(o,a){if(1&o&&(t.Gf(C.NW,5),t.Gf(A.YE,5),t.Gf(H,5)),2&o){let u;t.iGM(u=t.CRH())&&(a.paginator=u.first),t.iGM(u=t.CRH())&&(a.sort=u.first),t.iGM(u=t.CRH())&&(a.input=u.first)}},features:[t.qOj],decls:73,vars:41,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-md-4"],[1,"form-label"],[1,"form-control",3,"placeholder"],["input",""],[1,"form-select",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","documentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","categoryName"],["matColumnDef","createdDate"],["matColumnDef","operationName"],["matColumnDef","createdBy"],["matColumnDef","permissionUser"],["matColumnDef","permissionRole"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],["class","loading-shade",4,"ngIf"],[1,"country-item",3,"ngStyle"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"col-sm-12","m-t-15"],[1,"loading-shade"]],template:function(o,a){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()()()(),t.TgZ(10,"div",4)(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",13,14),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",11)(23,"label",12),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"mat-select",15),t.NdJ("selectionChange",function(g){return a.onCategoryChange(g)}),t.ALo(27,"translate"),t.TgZ(28,"mat-option",16),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,z,4,6,"mat-option",17),t.qZA()(),t.TgZ(32,"div",11)(33,"label",12),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-select",15),t.NdJ("selectionChange",function(g){return a.onUserChange(g)}),t.ALo(37,"translate"),t.TgZ(38,"mat-option",16),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.YNc(41,K,2,3,"mat-option",17),t.qZA()()(),t.TgZ(42,"div",4)(43,"div",18)(44,"div",19)(45,"table",20),t.ynx(46,21),t.YNc(47,P,3,3,"th",22),t.YNc(48,J,2,1,"td",23),t.BQk(),t.ynx(49,24),t.YNc(50,W,3,3,"th",22),t.YNc(51,G,2,1,"td",23),t.BQk(),t.ynx(52,25),t.YNc(53,w,4,6,"th",22),t.YNc(54,k,3,4,"td",23),t.BQk(),t.ynx(55,26),t.YNc(56,X,3,3,"th",22),t.YNc(57,V,2,1,"td",23),t.BQk(),t.ynx(58,27),t.YNc(59,q,3,3,"th",22),t.YNc(60,tt,2,1,"td",23),t.BQk(),t.ynx(61,28),t.YNc(62,et,3,3,"th",22),t.YNc(63,ot,2,1,"td",23),t.BQk(),t.ynx(64,29),t.YNc(65,nt,3,3,"th",22),t.YNc(66,it,2,1,"td",23),t.BQk(),t.YNc(67,rt,1,0,"tr",30),t.YNc(68,at,1,0,"tr",31),t.qZA(),t.YNc(69,st,5,3,"ng-container",32),t._UZ(70,"mat-paginator",33),t.qZA()()()()()()()()(),t.YNc(71,ct,2,0,"div",34),t.ALo(72,"async")),2&o&&(t.xp6(8),t.Oqu(t.lcZ(9,20,"DOCUMENTS_AUDIT_TRAIL")),t.xp6(9),t.Oqu(t.lcZ(18,22,"SEARCH_DOCUMENT_BY_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(21,24,"SEARCH_DOCUMENT_BY_NAME")),t.xp6(5),t.Oqu(t.lcZ(25,26,"SELECT_CATEGORY")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,28,"SELECT_CATEGORY")),t.xp6(3),t.hij("-- ",t.lcZ(30,30,"NONE")," --"),t.xp6(2),t.Q6J("ngForOf",a.allCategories),t.xp6(3),t.Oqu(t.lcZ(35,32,"SELECT_USER")),t.xp6(2),t.s9C("placeholder",t.lcZ(37,34,"SELECT_USER")),t.xp6(3),t.hij("-- ",t.lcZ(40,36,"NONE")," --"),t.xp6(2),t.Q6J("ngForOf",a.users),t.xp6(4),t.Q6J("dataSource",a.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===a.dataSource.count),t.xp6(1),t.Q6J("length",a.documentResource.totalCount)("pageSize",a.documentResource.pageSize)("pageSizeOptions",t.DdM(40,ut)),t.xp6(1),t.Q6J("ngIf",t.lcZ(72,38,a.dataSource.loading$)))},dependencies:[l.sg,l.O5,l.PC,T.BZ,T.fO,T.as,T.w1,T.Dz,T.nj,T.ge,T.ev,T.XQ,T.Gk,Z.Ou,R.gD,Y.ey,A.YE,A.nU,C.NW,l.Ov,U.X$,b.M]}),e})(),data:{claimType:"DOCUMENT_AUDIT_TRAIL_VIEW_DOCUMENT_AUDIT_TRAIL"},canActivate:[h.a]}];let dt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(lt),m.Bz]}),e})();var mt=n(4144),pt=n(455),ht=n(4586);let gt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,dt,T.p0,Z.Cq,R.LD,pt.rP,A.JX,C.TU,mt.c,U.aw,ht.D]}),e})()}}]);