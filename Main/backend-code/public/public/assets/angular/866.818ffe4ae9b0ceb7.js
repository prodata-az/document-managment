"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[866],{2760:(S,h,n)=>{n.d(h,{c:()=>f});const f=[{id:0,name:"Daily"},{id:1,name:"Weekly"},{id:2,name:"Monthly"},{id:3,name:"Quarterly"},{id:4,name:"Half Yearly"},{id:5,name:"Yearly"}]},5519:(S,h,n)=>{n.d(h,{r:()=>d});class d{constructor(){this.fields="",this.orderBy="",this.searchQuery="",this.pageSize=30,this.skip=0,this.name="",this.totalCount=0,this.metaTags="",this.farmerid=""}}},690:(S,h,n)=>{n.d(h,{v:()=>T});var d=n(529),f=n(9646),u=n(262),g=n(2760),v=n(4650),N=n(8032);let T=(()=>{class m{constructor(i,r){this.httpClient=i,this.commonHttpErrorService=r}getUsers(){return this.httpClient.get("user").pipe((0,u.K)(this.commonHttpErrorService.handleError))}getUsersForDropdown(){return this.httpClient.get("user-dropdown").pipe((0,u.K)(this.commonHttpErrorService.handleError))}getRoles(){return this.httpClient.get("role").pipe((0,u.K)(this.commonHttpErrorService.handleError))}getRolesForDropdown(){return this.httpClient.get("role-dropdown").pipe((0,u.K)(this.commonHttpErrorService.handleError))}getMyReminder(i){return this.httpClient.get(`reminder/${i}/myreminder`).pipe((0,u.K)(this.commonHttpErrorService.handleError))}getReminder(i){return this.httpClient.get(`reminder/${i}`).pipe((0,u.K)(this.commonHttpErrorService.handleError))}addDocumentAuditTrail(i){return this.httpClient.post("documentAuditTrail",i).pipe((0,u.K)(this.commonHttpErrorService.handleError))}downloadDocument(i,r){return this.httpClient.get(`document/${i}/download/${r} `,{reportProgress:!0,observe:"events",responseType:"blob"})}isDownloadFlag(i,r){return this.httpClient.get(`document/${i}/isDownloadFlag/isPermission/${r}`)}getDocumentToken(i){return this.httpClient.get(`documentToken/${i}/token`)}deleteDocumentToken(i){return this.httpClient.delete(`documentToken/${i}`)}readDocument(i,r){return this.httpClient.get(`document/${i}/readText/${r}`)}getReminderFrequency(){return(0,f.of)(g.c)}getAllRemindersForCurrentUser(i){const p=(new d.LE).set("fields",i.fields?i.fields:"").set("orderBy",i.orderBy?i.orderBy:"").set("pageSize",i.pageSize.toString()).set("skip",i.skip.toString()).set("searchQuery",i.searchQuery?i.searchQuery:"").set("subject",i.subject?i.subject:"").set("message",i.message?i.message:"").set("frequency",i.frequency?i.frequency:"");return this.httpClient.get("reminder/all/currentuser",{params:p,observe:"response"})}deleteReminderCurrentUser(i){return this.httpClient.delete(`reminder/currentuser/${i}`)}}return m.\u0275fac=function(i){return new(i||m)(v.LFG(d.eN),v.LFG(N.U))},m.\u0275prov=v.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6462:(S,h,n)=>{n.r(h),n.d(h,{NotificationModule:()=>rt});var d=n(6895),f=n(8988),u=n(319),g=n(6308),v=n(4913),N=n(6451),T=n(4968),m=n(8505),E=n(8372),i=n(1884),r=n(2676),p=n(1312),x=n(1135),b=n(9646),D=n(262),Z=n(8746);class L{get count(){return this._count}constructor(s){this.notificationService=s,this.notificationsSubject=new x.X([]),this.responseHeaderSubject=new x.X(null),this.loadingSubject=new x.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}connect(s){return this.notificationsSubject.asObservable()}disconnect(s){this.notificationsSubject.complete(),this.loadingSubject.complete()}loadNotifications(s){this.loadingSubject.next(!0),this.notificationService.getNotifications(s).pipe((0,D.K)(()=>(0,b.of)([])),(0,Z.x)(()=>this.loadingSubject.next(!1))).subscribe(o=>{const a=new p.E;a.pageSize=parseInt(o.headers.get("pageSize")),a.totalCount=parseInt(o.headers.get("totalCount")),a.skip=parseInt(o.headers.get("skip")),this.responseHeaderSubject.next({...a});const c=[...o.body];this._count=c.length,this.notificationsSubject.next(c)})}}var O=n(6927),y=n(8739),t=n(4650),U=n(5769),M=n(1218),I=n(914),_=n(7185),l=n(671),R=n(1572),j=n(9383),Y=n(8017);const $=["input"];function B(e,s){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION")," "))}function H(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(o);const c=t.oxw().$implicit,C=t.oxw();return t.KtG(C.viewDocument(c))}),t._UZ(1,"i",32),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"VIEW_DOCUMENT")," "))}function Q(e,s){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,H,4,3,"button",30),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Q6J("ngIf",o.documentId)}}function z(e,s){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE")," "))}function F(e,s){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"utcToLocalTime"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.createdDate,"short")," ")}}function w(e,s){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MESSAGE")," "))}function J(e,s){1&e&&(t.TgZ(0,"span",34),t._uU(1,"new"),t.qZA())}function K(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(2),t.hij(" ",o.documentName,""),t.xp6(1),t.hij(" ",t.lcZ(4,2,"DOCUMENT_PERMISSION_GRANTED_TO_YOU")," ")}}function G(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.BQk()),2&e){const o=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,2,"DOCUMENT_NAME"),""),t.xp6(2),t.hij(" : ",o.documentName," :: ")}}function W(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," :: "),t.YNc(5,G,5,4,"ng-container",26),t._uU(6),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"REMINDER")),t.xp6(3),t.Q6J("ngIf",o.documentId),t.xp6(1),t.hij(" ",o.message," ")}}function k(e,s){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,J,2,0,"span",33),t.YNc(2,K,5,4,"ng-container",26),t.YNc(3,W,7,5,"ng-container",26),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Q6J("ngIf",!o.isRead),t.xp6(1),t.Q6J("ngIf",!o.message),t.xp6(1),t.Q6J("ngIf",o.message)}}function P(e,s){1&e&&t._UZ(0,"tr",35)}function X(e,s){1&e&&t._UZ(0,"tr",36)}function V(e,s){1&e&&(t.ynx(0),t.TgZ(1,"div",37)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.BQk()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"NO_DATA_FOUND")))}function q(e,s){1&e&&(t.TgZ(0,"div",38),t._UZ(1,"mat-spinner"),t.qZA())}const tt=function(){return[10,20,30]},et=[{path:"",component:(()=>{class e extends r.H{constructor(o,a,c,C,A){super(),this.notificationService=o,this.router=a,this.overlay=c,this.documentService=C,this.toastrService=A,this.notifications=[],this.displayedColumns=["action","createdDate","message"],this.isLoadingResults=!0,this.notificationResource=new v.J,this.notificationResource.pageSize=10,this.notificationResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new L(this.notificationService),this.dataSource.loadNotifications(this.notificationResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,N.T)(this.sort.sortChange,this.paginator.page).pipe((0,m.b)(()=>{this.notificationResource.skip=this.paginator.pageIndex,this.notificationResource.pageSize=this.paginator.pageSize,this.notificationResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadNotifications(this.notificationResource)})).subscribe(),this.sub$.sink=(0,T.R)(this.input.nativeElement,"keyup").pipe((0,E.b)(1e3),(0,i.x)(),(0,m.b)(()=>{this.paginator.pageIndex=0,this.notificationResource.name=this.input.nativeElement.value,this.dataSource.loadNotifications(this.notificationResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(o=>{o&&(this.notificationResource.pageSize=o.pageSize,this.notificationResource.skip=o.skip,this.notificationResource.totalCount=o.totalCount)})}viewDocument(o){this.sub$.sink=this.notificationService.markAsRead(o.id).subscribe(()=>{}),this.sub$.sink=this.documentService.getDocument(o.documentId).subscribe(a=>{if(!a||0==Object.keys(a).length)return void this.toastrService.error("you don't have permission to access this document.");const C=a.url.split(".")[1];this.overlay.open(O.Y,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:a.id,name:a.name,square:a.square,farmerid:a.farmerid,violation:a.violation,status:a.status,district:a.district,extension:C,isRestricted:!1,isVersion:!1}})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(U.g),t.Y36(f.F0),t.Y36(M.T),t.Y36(I.Z),t.Y36(_._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-list"]],viewQuery:function(o,a){if(1&o&&(t.Gf(y.NW,5),t.Gf(g.YE,5),t.Gf($,5)),2&o){let c;t.iGM(c=t.CRH())&&(a.paginator=c.first),t.iGM(c=t.CRH())&&(a.sort=c.first),t.iGM(c=t.CRH())&&(a.input=c.first)}},features:[t.qOj],decls:41,vars:21,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-md-6"],[1,"form-label"],[1,"form-control",3,"placeholder"],["input",""],[1,"col"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","message"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[4,"ngIf"],["class","loading-shade",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","button","class","btn btn-sm btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"las","la-eye"],["class","badge bg-success",4,"ngIf"],[1,"badge","bg-success"],["mat-header-row",""],["mat-row",""],[1,"col-sm-12","m-t-15"],[1,"loading-shade"]],template:function(o,a){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()()()(),t.TgZ(10,"div",4)(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",13,14),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"div",15)(24,"div",16)(25,"table",17),t.ynx(26,18),t.YNc(27,B,3,3,"th",19),t.YNc(28,Q,2,1,"td",20),t.BQk(),t.ynx(29,21),t.YNc(30,z,3,3,"th",19),t.YNc(31,F,3,4,"td",20),t.BQk(),t.ynx(32,22),t.YNc(33,w,3,3,"th",19),t.YNc(34,k,4,3,"td",20),t.BQk(),t.YNc(35,P,1,0,"tr",23),t.YNc(36,X,1,0,"tr",24),t.qZA(),t._UZ(37,"mat-paginator",25),t.YNc(38,V,5,3,"ng-container",26),t.qZA()()()()()()()()(),t.YNc(39,q,2,0,"div",27),t.ALo(40,"async")),2&o&&(t.xp6(8),t.Oqu(t.lcZ(9,12,"NOTIFICATIONS")),t.xp6(9),t.Oqu(t.lcZ(18,14,"SEARCH_BY_DOCUMENT_NAME_OR_MESSAGE")),t.xp6(2),t.s9C("placeholder",t.lcZ(21,16,"SEARCH_BY_DOCUMENT_NAME_OR_MESSAGE")),t.xp6(6),t.Q6J("dataSource",a.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.notificationResource.totalCount)("pageSize",a.notificationResource.pageSize)("pageSizeOptions",t.DdM(20,tt)),t.xp6(1),t.Q6J("ngIf",0===a.dataSource.count),t.xp6(1),t.Q6J("ngIf",t.lcZ(40,18,a.dataSource.loading$)))},dependencies:[d.O5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,R.Ou,g.YE,g.nU,y.NW,d.Ov,j.X$,Y.M]}),e})(),canActivate:[u.a]}];let it=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(et),f.Bz]}),e})();var nt=n(3417),ot=n(4144),st=n(4385),at=n(455);let rt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,nt.m,it,l.p0,R.Cq,st.LD,at.rP,g.JX,y.TU,ot.c]}),e})()}}]);