"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[232],{7232:(He,S,a)=>{a.r(S),a.d(S,{UserModule:()=>$e});var g=a(6895),p=a(8988),U=a(319),c=a(4006),h=a(2676),e=a(4650),f=a(1584),Z=a(7185),E=a(690),v=a(6107),T=a(4385),I=a(3238),b=a(9785),A=a(9383);function F(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADD_USER")))}function M(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"EDIT_USER")))}function O(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function q(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME_IS_REQUIRED")," "))}function Y(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_IS_REQUIRED")," "))}function k(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL_IS_REQUIRED")," "))}function D(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function J(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function Q(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function y(t,o){if(1&t&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",29),e.YNc(5,J,3,3,"div",15),e.YNc(6,Q,3,3,"div",15),e.qZA()),2&t){const s=e.oxw();let n;e.xp6(2),e.Oqu(e.lcZ(3,3,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.userForm.get("password").touched&&(null==(n=s.userForm.get("password"))?null:n.hasError("minlength")))}}function j(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function $(t,o){1&t&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function H(t,o){if(1&t&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Confirm Password"),e.qZA(),e._UZ(3,"input",30),e.YNc(4,j,3,3,"div",15),e.YNc(5,$,3,3,"div",15),e.qZA()),2&t){const s=e.oxw();e.xp6(4),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").hasError("required")),e.xp6(1),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function V(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.selectedRoles[0].name," ")}}function B(t,o){if(1&t&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.AsE(" (+",s.selectedRoles.length-1," ",2===s.selectedRoles.length?"other":"others",") ")}}function G(t,o){if(1&t&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s.name)}}function W(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.saveUser())}),e.O4$(),e.TgZ(1,"svg",35)(2,"g",36),e._UZ(3,"path",37),e.qZA()(),e._uU(4," Save"),e.qZA()}}function K(t,o){1&t&&(e.ynx(0),e.YNc(1,W,5,0,"button",33),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","USER_EDIT_USER"))}function X(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.saveUser())}),e.O4$(),e.TgZ(1,"svg",35)(2,"g",36),e._UZ(3,"path",37),e.qZA()(),e._uU(4),e.ALo(5,"translate"),e.qZA()}2&t&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"SAVE"),""))}function z(t,o){1&t&&(e.ynx(0),e.YNc(1,X,6,3,"button",33),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","USER_CREATE_USER"))}const ee=function(){return["/users"]};let R=(()=>{class t extends h.H{constructor(s,n,i,r,l,m,u){super(),this.fb=s,this.router=n,this.activeRoute=i,this.userService=r,this.toastrService=l,this.commonService=m,this.translationService=u,this.isEditMode=!1,this.selectedRoles=[]}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user,this.userForm.get("email").disable()):(this.userForm.get("password").setValidators([c.kI.required,c.kI.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.kI.required]))}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email]],phoneNumber:["",[c.kI.required]],password:[""],confirmPassword:[""]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.toastrService.error(this.translationService.getValue("PLEASE_ENTER_PROPER_DATA"))}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,roleIds:this.getSelectedRoles()}}getSelectedRoles(){return this.selectedRoles.map(s=>s.id)}getRoles(){this.sub$.sink=this.commonService.getRolesForDropdown().subscribe(s=>{if(this.roleList=s,this.isEditMode){const n=this.user.userRoles.map(i=>i.roleId);this.selectedRoles=this.roleList.filter(i=>n.indexOf(i.id)>-1)}})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(c.QS),e.Y36(p.F0),e.Y36(p.gz),e.Y36(f.K),e.Y36(Z._W),e.Y36(E.v),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],features:[e.qOj],decls:59,vars:33,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"col-md-6"],[1,"form-label"],["formControlName","firstName","type","text",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],["multiple","",1,"form-select",3,"value","valueChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"m-t-10","col-md-12"],["type","button",1,"btn","btn-red","btn-danger","btn-sm",3,"routerLink"],["width","16","height","16","viewBox","0 0 25 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","trash-2","stroke","red"],["id","Icon","d","M3.6875 6H5.6875M5.6875 6H21.6875M5.6875 6V20C5.6875 20.5304 5.89821 21.0391 6.27329 21.4142C6.64836 21.7893 7.15707 22 7.6875 22H17.6875C18.2179 22 18.7266 21.7893 19.1017 21.4142C19.4768 21.0391 19.6875 20.5304 19.6875 20V6H5.6875ZM8.6875 6V4C8.6875 3.46957 8.89821 2.96086 9.27329 2.58579C9.64836 2.21071 10.1571 2 10.6875 2H14.6875C15.2179 2 15.7266 2.21071 16.1017 2.58579C16.4768 2.96086 16.6875 3.46957 16.6875 4V6M10.6875 11V17M14.6875 11V17","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[1,"example-additional-selection"],[3,"value"],["class","btn btn-green btn-success btn-sm m-r-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-green","btn-success","btn-sm","m-r-10",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","check-circle","stroke","white"],["id","Icon","d","M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999M22 3.99999L12 14.01L9.00001 11.01","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(s,n){if(1&s&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,F,3,3,"h2",7),e.YNc(8,M,3,3,"h2",7),e.qZA()()()()(),e.TgZ(9,"div",4)(10,"div",8)(11,"div",9)(12,"div",10)(13,"form",11)(14,"div",4)(15,"div",12)(16,"label",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",14),e.YNc(20,O,3,3,"div",15),e.qZA(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",16),e.YNc(26,q,3,3,"div",15),e.qZA(),e.TgZ(27,"div",12)(28,"label",13),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",17),e.YNc(32,Y,3,3,"div",15),e.qZA(),e.TgZ(33,"div",12)(34,"label",13),e._uU(35,"Email"),e.qZA(),e._UZ(36,"input",18),e.YNc(37,k,3,3,"div",15),e.YNc(38,D,3,3,"div",15),e.qZA(),e.YNc(39,y,7,5,"div",19),e.YNc(40,H,6,2,"div",19),e.TgZ(41,"div",12)(42,"label",13),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"mat-select",20),e.NdJ("valueChange",function(r){return n.selectedRoles=r}),e.TgZ(46,"mat-select-trigger"),e.YNc(47,V,2,1,"span",7),e.YNc(48,B,2,2,"span",21),e.qZA(),e.YNc(49,G,2,2,"mat-option",22),e.qZA()(),e.TgZ(50,"div",23),e.YNc(51,K,2,1,"ng-container",7),e.YNc(52,z,2,1,"ng-container",7),e.TgZ(53,"button",24),e.O4$(),e.TgZ(54,"svg",25)(55,"g",26),e._UZ(56,"path",27),e.qZA()(),e._uU(57),e.ALo(58,"translate"),e.qZA()()()()()()()()()()),2&s){let i,r,l,m,u;e.xp6(7),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",n.isEditMode),e.xp6(5),e.Q6J("formGroup",n.userForm),e.xp6(4),e.Oqu(e.lcZ(18,22,"FIRST_NAME")),e.xp6(3),e.Q6J("ngIf",(null==(i=n.userForm.get("firstName"))?null:i.touched)&&(null==(i=n.userForm.get("firstName"))?null:i.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(24,24,"LAST_NAME")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("lastName").touched&&(null==(r=n.userForm.get("lastName"))?null:r.hasError("required"))),e.xp6(3),e.Oqu(e.lcZ(30,26,"MOBILE_NUMBER")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("phoneNumber").touched&&(null==(l=n.userForm.get("phoneNumber"))?null:l.hasError("required"))),e.xp6(5),e.Q6J("ngIf",n.userForm.get("email").touched&&(null==(m=n.userForm.get("email"))?null:m.hasError("required"))),e.xp6(1),e.Q6J("ngIf",n.userForm.get("email").touched&&(null==(u=n.userForm.get("email"))?null:u.hasError("email"))),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(3),e.Oqu(e.lcZ(44,28,"ROLES")),e.xp6(2),e.Q6J("value",n.selectedRoles),e.xp6(2),e.Q6J("ngIf",n.selectedRoles.length>0),e.xp6(1),e.Q6J("ngIf",n.selectedRoles.length>1),e.xp6(1),e.Q6J("ngForOf",n.roleList),e.xp6(2),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("routerLink",e.DdM(32,ee)),e.xp6(4),e.hij(" ",e.lcZ(58,30,"CANCEL"),"")}},dependencies:[g.sg,g.O5,p.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,T.gD,T.$L,I.ey,b.d,A.X$],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}",".btn-green[_ngcontent-%COMP%]{\n    background: #32977F !important;\n  }\n  .btn-green[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: #ffff !important;\n    width: 20px !important;\n    height: 20px !important;\n  }\n  .btn-green-color[_ngcontent-%COMP%]{\n    color: #ffff !important;\n  }\n  .btn-red[_ngcontent-%COMP%]{\n    border: 1px solid red !important;\n    background-color: white !important;\n    color: red !important;\n  }\n  \n  .btn-red[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{\n    color: red !important;\n    width: 20px !important;\n    height: 20px !important;\n  }"]}),t})(),x=(()=>{class t{constructor(s){this.userService=s}resolve(s,n){const i=s.paramMap.get("id");return this.userService.getUser(i)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(f.K))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var _=a(5412);function te(t,o){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function se(t,o){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function ne(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,te,3,3,"div",11),e.YNc(2,se,3,3,"div",11),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.minlength)}}function oe(t,o){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function ie(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,oe,3,3,"div",11),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("confirmPassword").errors?null:s.resetPasswordForm.get("confirmPassword").errors.required)}}function re(t,o){1&t&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}let ae=(()=>{class t extends h.H{constructor(s,n,i,r,l,m){super(),this.userService=s,this.fb=n,this.dialogRef=i,this.data=r,this.toastrService=l,this.translationService=m}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.userName)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[{value:"",disabled:!0}],password:["",[c.kI.required,c.kI.minLength(6)]],confirmPassword:["",[c.kI.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid&&(this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}))}createBuildObject(){return{email:this.resetPasswordForm.get("email").value,password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(f.K),e.Y36(c.QS),e.Y36(_.so),e.Y36(_.WI),e.Y36(Z._W),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],features:[e.qOj],decls:33,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-md-12","m-b-10"],[1,"form-label"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],[1,"col-md-12"],[1,"form-group"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],[1,"fas","fa-save"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-times-circle"],[1,"text-danger"]],template:function(s,n){1&s&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",6),e.YNc(15,ne,3,2,"div",7),e.qZA(),e.TgZ(16,"div",8)(17,"div",9)(18,"label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,ie,2,1,"div",7),e.YNc(23,re,3,3,"div",11),e.qZA()()()(),e.TgZ(24,"div",12)(25,"button",13),e.NdJ("click",function(){return n.resetPassword()}),e._UZ(26,"i",14),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"button",15),e.NdJ("click",function(){return n.onNoClick()}),e._UZ(30,"i",16),e._uU(31),e.ALo(32,"translate"),e.qZA()()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,10,"RESET_PASSWORD")),e.xp6(3),e.Q6J("formGroup",n.resetPasswordForm),e.xp6(3),e.Oqu(e.lcZ(8,12,"EMAIL")),e.xp6(5),e.Oqu(e.lcZ(13,14,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("password").touched&&n.resetPasswordForm.get("password").errors),e.xp6(4),e.Oqu(e.lcZ(20,16,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.hasError("notSame")),e.xp6(4),e.hij(" ",e.lcZ(28,18,"SAVE"),""),e.xp6(4),e.hij(" ",e.lcZ(32,20,"CANCEL"),""))},dependencies:[g.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.uh,_.xY,_.H8,A.X$]}),t})();var ce=a(5485),d=a(671),w=a(1572),P=a(4859),N=a(7392),C=a(8255),le=a(1676);const me=function(){return["/users/manage"]};function ue(t,o){1&t&&(e.TgZ(0,"div",5)(1,"ul",22)(2,"li",23)(3,"a",24),e._UZ(4,"app-feather-icons",25),e.TgZ(5,"span",26),e._uU(6),e.ALo(7,"translate"),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(7,me)),e.xp6(1),e.Tol("btn-success"),e.Q6J("icon","Plus"),e.xp6(2),e.hij(" ",e.lcZ(7,5,"ADD_USER"),""))}function de(t,o){1&t&&(e.TgZ(0,"th",27)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ACTION")," "))}function pe(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.editUser(i.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"EDIT")," "))}function _e(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deleteUser(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"DELETE")," "))}function ge(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.userPermission(i.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"people"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"PERMISSION")," "))}function he(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(s);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.resetPassword(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"key"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"RESET_PASSWORD")," "))}function fe(t,o){if(1&t&&(e.TgZ(0,"td",28)(1,"button",29)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,30),e.YNc(6,pe,5,3,"button",31),e.YNc(7,_e,5,3,"button",32),e.YNc(8,ge,5,3,"button",32),e.YNc(9,he,5,3,"button",32),e.qZA()()),2&t){const s=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",s),e.xp6(5),e.Q6J("hasClaim","USER_EDIT_USER"),e.xp6(1),e.Q6J("hasClaim","USER_DELETE_USER"),e.xp6(1),e.Q6J("hasClaim","USER_ASSIGN_PERMISSION"),e.xp6(1),e.Q6J("hasClaim","USER_RESET_PASSWORD")}}function ve(t,o){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL")," "))}function Ue(t,o){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.xp6(1),e.hij(" ",s.email," ")}}function Ze(t,o){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME")," "))}function Ae(t,o){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.xp6(1),e.hij(" ",s.firstName," ")}}function Ce(t,o){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME")," "))}function Te(t,o){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.xp6(1),e.hij(" ",s.lastName," ")}}function xe(t,o){1&t&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_NUMBER")," "))}function Se(t,o){if(1&t&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&t){const s=o.$implicit;e.xp6(1),e.hij(" ",s.phoneNumber," ")}}function Ee(t,o){1&t&&e._UZ(0,"tr",34)}function be(t,o){1&t&&e._UZ(0,"tr",35)}function Re(t,o){1&t&&e._UZ(0,"mat-spinner")}function we(t,o){if(1&t&&(e.TgZ(0,"div",36),e.YNc(1,Re,1,0,"mat-spinner",37),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.isLoadingResults)}}let Pe=(()=>{class t extends h.H{constructor(s,n,i,r,l,m,u){super(),this.userService=s,this.toastrService=n,this.commonService=i,this.commonDialogService=r,this.dialog=l,this.router=m,this.translationService=u,this.users=[],this.displayedColumns=["action","email","firstName","lastName","phoneNumber"],this.isLoadingResults=!1}ngOnInit(){this.getUsers()}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${s.userName}`).subscribe(n=>{n&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_DELETED_SUCCESSFULLY")),this.getUsers()}))})}getUsers(){this.isLoadingResults=!0,this.sub$.sink=this.commonService.getUsers().subscribe(s=>{this.isLoadingResults=!1,this.users=s},s=>{s.messages.forEach(n=>{this.toastrService.error(n),this.isLoadingResults=!1})})}resetPassword(s){this.dialog.open(ae,{width:"350px",data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(f.K),e.Y36(Z._W),e.Y36(E.v),e.Y36(ce.V),e.Y36(_.uw),e.Y36(p.F0),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],features:[e.qOj],decls:34,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],["class","col-6",4,"hasClaim"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body","table-responsive"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","loading-shade",4,"ngIf"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink"],[3,"icon"],[1,"d-none","d-sm-inline"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-row",""],["mat-row",""],[1,"loading-shade"],[4,"ngIf"]],template:function(s,n){1&s&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.YNc(10,ue,8,8,"div",7),e.qZA()()(),e.TgZ(11,"div",4)(12,"div",8)(13,"div",9)(14,"div",10)(15,"table",11),e.ynx(16,12),e.YNc(17,de,4,3,"th",13),e.YNc(18,fe,10,5,"td",14),e.BQk(),e.ynx(19,15),e.YNc(20,ve,3,3,"th",13),e.YNc(21,Ue,2,1,"td",14),e.BQk(),e.ynx(22,16),e.YNc(23,Ze,3,3,"th",13),e.YNc(24,Ae,2,1,"td",14),e.BQk(),e.ynx(25,17),e.YNc(26,Ce,3,3,"th",13),e.YNc(27,Te,2,1,"td",14),e.BQk(),e.ynx(28,18),e.YNc(29,xe,3,3,"th",13),e.YNc(30,Se,2,1,"td",14),e.BQk(),e.YNc(31,Ee,1,0,"tr",19),e.YNc(32,be,1,0,"tr",20),e.qZA()()()()()()(),e.YNc(33,we,2,1,"div",21)),2&s&&(e.xp6(8),e.Oqu(e.lcZ(9,7,"USERS")),e.xp6(2),e.Q6J("hasClaim","USER_CREATE_USER"),e.xp6(5),e.Q6J("dataSource",n.users),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("ngIf",n.isLoadingResults))},dependencies:[g.O5,p.rH,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,w.Ou,P.RK,N.Hw,C.VK,C.OP,C.p6,le.A,b.d,A.X$]}),t})();var Ne=a(4128),Le=a(8853),Ie=a(2852),L=a(6709);function Fe(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",25)(1,"mat-checkbox",26),e.NdJ("change",function(i){const l=e.CHM(s).$implicit,m=e.oxw().$implicit,u=e.oxw();return e.KtG(u.onPermissionChange(i,m,l))}),e._uU(2),e.qZA()()}if(2&t){const s=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.checkPermission(s.id)),e.xp6(1),e.hij(" ",s.name," ")}}function Me(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"mat-checkbox",14),e.NdJ("change",function(i){const l=e.CHM(s).$implicit,m=e.oxw();return e.KtG(m.onPageSelect(i,l))}),e.TgZ(3,"b"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",23),e.YNc(6,Fe,3,2,"div",24),e.qZA()()}if(2&t){const s=o.$implicit;e.xp6(4),e.hij(" ",s.name,""),e.xp6(2),e.Q6J("ngForOf",s.pageActions)}}const Oe=function(){return["/users"]};let qe=(()=>{class t extends h.H{constructor(s){super(),this.translationService=s,this.manageUserClaimAction=new e.vpe,this.step=0}checkPermission(s){return!!this.user.userClaims.find(i=>i.actionId===s)}onPermissionChange(s,n,i){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:i.code,claimValue:"",actionId:i.id});else{const r=this.user.userClaims.find(m=>m.actionId===i.id),l=this.user.userClaims.indexOf(r,0);l>-1&&this.user.userClaims.splice(l,1)}}onPageSelect(s,n){if(s.checked)n.pageActions.forEach(i=>{this.checkPermission(i.id)||this.user.userClaims.push({userId:this.user.id,claimType:i.code,claimValue:"",actionId:i.id})});else{const i=n.pageActions?.map(r=>r.id);this.user.userClaims=this.user.userClaims.filter(r=>i.indexOf(r.actionId)<0)}}saveUserClaim(){this.manageUserClaimAction.emit(this.user)}selecetAll(s){s.checked?this.pages.forEach(n=>{n.pageActions.forEach(i=>{this.checkPermission(i.id)||this.user.userClaims.push({userId:this.user.id,claimType:i.code,claimValue:"",actionId:i.id})})}):this.user.userClaims=[]}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission-presentation"]],inputs:{pages:"pages",user:"user"},outputs:{manageUserClaimAction:"manageUserClaimAction"},features:[e.qOj],decls:36,vars:17,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"text-info"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"card"],[1,"body"],[1,"row","margin-2"],[1,"col-sm-12"],[1,"widget-title"],["color","primary",3,"change"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"col-sm-12","mt-2"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-r-10",3,"click"],[1,"fas","fa-save"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"fas","fa-times-circle"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],[1,"row","m-l-15"],["class","col-sm-3 row",4,"ngFor","ngForOf"],[1,"col-sm-3","row"],["color","primary",3,"checked","change"]],template:function(s,n){1&s&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"span",7),e._uU(11),e.qZA()()()()()()(),e.TgZ(12,"div",4)(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"h4",13),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"mat-checkbox",14),e.NdJ("change",function(r){return n.selecetAll(r)}),e._uU(22," Select All "),e.qZA()()(),e.TgZ(23,"div",4)(24,"div",12),e.YNc(25,Me,7,2,"div",15),e.qZA()(),e.TgZ(26,"div",4)(27,"div",16)(28,"button",17),e.NdJ("click",function(){return n.saveUserClaim()}),e._UZ(29,"i",18),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"button",19),e._UZ(33,"i",20),e._uU(34),e.ALo(35,"translate"),e.qZA()()()()()()()()()),2&s&&(e.xp6(8),e.hij("",e.lcZ(9,8,"USER_PAGE_PERMISSION_TO")," : "),e.xp6(3),e.AsE("",null==n.user?null:n.user.firstName," ",null==n.user?null:n.user.lastName,""),e.xp6(8),e.Oqu(e.lcZ(20,10,"PERMISSION")),e.xp6(6),e.Q6J("ngForOf",n.pages),e.xp6(5),e.hij(" ",e.lcZ(31,12,"SAVE")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(16,Oe)),e.xp6(2),e.hij(" ",e.lcZ(35,14,"CANCEL")," "))},dependencies:[g.sg,p.rH,L.oG,A.X$]}),t})();const ke=[{path:"",component:Pe,data:{claimType:"USER_VIEW_USERS"},canActivate:[U.a]},{path:"manage/:id",component:R,resolve:{user:x},data:{claimType:"USER_EDIT_USER"},canActivate:[U.a]},{path:"manage",component:R,data:{claimType:"USER_CREATE_USER"},canActivate:[U.a]},{path:"permission/:id",component:(()=>{class t extends h.H{constructor(s,n,i,r,l,m,u){super(),this.activeRoute=s,this.router=n,this.toastrService=i,this.pageService=r,this.actionService=l,this.userService=m,this.translationService=u}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(i=>{this.user=i.user});const s=this.actionService.getAll(),n=this.pageService.getAll();(0,Ne.D)({getActionRequest:s,getPageRequest:n}).subscribe(i=>{this.pages=i.getPageRequest,this.pages=this.pages.map(r=>{const l=i.getActionRequest.filter(u=>u.pageId==r.id);return Object.assign({},r,{pageActions:l})})})}manageUserClaimAction(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])},n=>{this.toastrService.error(n.error.message)})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(Z._W),e.Y36(Le.P),e.Y36(Ie.c),e.Y36(f.K),e.Y36(v.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"pages","user","manageUserClaimAction"]],template:function(s,n){1&s&&(e.TgZ(0,"app-user-permission-presentation",0),e.NdJ("manageUserClaimAction",function(r){return n.manageUserClaimAction(r)}),e.qZA()),2&s&&e.Q6J("pages",n.pages)("user",n.user)},dependencies:[qe]}),t})(),resolve:{user:x},data:{claimType:"USER_ASSIGN_PERMISSION"},canActivate:[U.a]}];let De=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(ke),p.Bz]}),t})();var Je=a(3417),Qe=a(7084),ye=a(455),je=a(6482);let $e=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[x],imports:[g.ez,De,c.u5,c.UX,d.p0,w.Cq,_.Is,T.LD,ye.rP,Je.m,C.Tx,P.ot,Qe.To,L.p9,N.Ps,je.u]}),t})()}}]);